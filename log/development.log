  [1m[35m (1.7ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (11.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateIcons (20210727231214)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "icons" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "image" varchar NOT NULL, "created" date NOT NULL, "height" integer NOT NULL, "history" varchar NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210727231214"]]
  [1m[36mTRANSACTION (5.3ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateCities (20210727231252)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "cities" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "image" varchar NOT NULL, "habitants" integer NOT NULL, "surface" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210727231252"]]
  [1m[36mTRANSACTION (4.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateIconCities (20210727231332)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "icon_cities" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "icon_id" integer NOT NULL, "city_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_f3992069db"
FOREIGN KEY ("icon_id")
  REFERENCES "icons" ("id")
, CONSTRAINT "fk_rails_92b1a91420"
FOREIGN KEY ("city_id")
  REFERENCES "cities" ("id")
)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_icon_cities_on_icon_id" ON "icon_cities" ("icon_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_icon_cities_on_city_id" ON "icon_cities" ("city_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210727231332"]]
  [1m[36mTRANSACTION (4.3ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateContinents (20210728011334)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "continents" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "image" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210728011334"]]
  [1m[36mTRANSACTION (8.8ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddContinentToCities (20210728012204)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "cities" ADD "continent_id" integer[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_cities_on_continent_id" ON "cities" ("continent_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "acities" ("id" integer NOT NULL PRIMARY KEY, "name" varchar NOT NULL, "image" varchar NOT NULL, "habitants" integer NOT NULL, "surface" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, "continent_id" integer DEFAULT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_acities_on_continent_id" ON "acities" ("continent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "acities" ("id","name","image","habitants","surface","created_at","updated_at","continent_id")
                     SELECT "id","name","image","habitants","surface","created_at","updated_at","continent_id" FROM "cities"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "cities"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "cities" ("id" integer NOT NULL PRIMARY KEY, "name" varchar NOT NULL, "image" varchar NOT NULL, "habitants" integer NOT NULL, "surface" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, "continent_id" integer DEFAULT NULL, CONSTRAINT "fk_rails_f1f8c45851"
FOREIGN KEY ("continent_id")
  REFERENCES "continents" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_cities_on_continent_id" ON "cities" ("continent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "cities" ("id","name","image","habitants","surface","created_at","updated_at","continent_id")
                     SELECT "id","name","image","habitants","surface","created_at","updated_at","continent_id" FROM "acities"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "acities"[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210728012204"]]
  [1m[36mTRANSACTION (4.6ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddDeletedAtToIcons (20210728031529)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "icons" ADD "deleted_at" datetime[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_icons_on_deleted_at" ON "icons" ("deleted_at")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210728031529"]]
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddDeletedAtToCities (20210728032038)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "cities" ADD "deleted_at" datetime[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_cities_on_deleted_at" ON "cities" ("deleted_at")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210728032038"]]
  [1m[36mTRANSACTION (4.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateUsers (20210728050258)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "password_diggest" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210728050258"]]
  [1m[36mTRANSACTION (4.1ms)[0m  [1m[36mcommit transaction[0m
Migrating to ChangePasswordDiggestName (20210728052309)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TEMPORARY TABLE "ausers" ("id" integer NOT NULL PRIMARY KEY, "email" varchar DEFAULT NULL, "password_digest" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "ausers" ("id","email","password_digest","created_at","updated_at")
                     SELECT "id","email","password_diggest","created_at","updated_at" FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer NOT NULL PRIMARY KEY, "email" varchar DEFAULT NULL, "password_digest" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[32mINSERT INTO "users" ("id","email","password_digest","created_at","updated_at")
                     SELECT "id","email","password_digest","created_at","updated_at" FROM "ausers"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "ausers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210728052309"]]
  [1m[36mTRANSACTION (3.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (3.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-07-31 07:06:47.805209"], ["updated_at", "2021-07-31 07:06:47.805209"]]
  [1m[36mTRANSACTION (6.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mContinent Load (0.2ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCity Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "cities" WHERE "cities"."name" = ? AND "cities"."deleted_at" IS NULL LIMIT ?[0m  [["name", "Paris"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mContinent Load (0.1ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCity Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "cities" WHERE "cities"."name" = ? AND "cities"."deleted_at" IS NULL LIMIT ?[0m  [["name", "Rome"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mContinent Load (0.2ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCity Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "cities" WHERE "cities"."name" = ? AND "cities"."deleted_at" IS NULL LIMIT ?[0m  [["name", "Rosario"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mContinent Create (0.8ms)[0m  [1m[32mINSERT INTO "continents" ("name", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "America"], ["image", "america.jpg"], ["created_at", "2021-07-31 07:10:45.186051"], ["updated_at", "2021-07-31 07:10:45.186051"]]
  [1m[36mTRANSACTION (7.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mContinent Load (0.3ms)[0m  [1m[34mSELECT "continents".* FROM "continents"[0m
  [1m[36mContinent Load (0.2ms)[0m  [1m[34mSELECT "continents".* FROM "continents"[0m
  [1m[36mContinent Load (0.2ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mContinent Update (0.3ms)[0m  [1m[33mUPDATE "continents" SET "name" = ?, "updated_at" = ? WHERE "continents"."id" = ?[0m  [["name", "Europe"], ["updated_at", "2021-07-31 07:13:17.526913"], ["id", 1]]
  [1m[36mTRANSACTION (8.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mContinent Load (0.7ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mContinent Create (0.3ms)[0m  [1m[32mINSERT INTO "continents" ("name", "image", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "America"], ["image", "america.png"], ["created_at", "2021-07-31 07:13:51.258482"], ["updated_at", "2021-07-31 07:13:51.258482"]]
  [1m[36mTRANSACTION (8.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mContinent Load (0.2ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCity Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "cities" WHERE "cities"."name" = ? AND "cities"."deleted_at" IS NULL LIMIT ?[0m  [["name", "Paris"], ["LIMIT", 1]]
  [1m[36mCity Create (0.6ms)[0m  [1m[32mINSERT INTO "cities" ("name", "image", "habitants", "surface", "created_at", "updated_at", "continent_id") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Paris"], ["image", "paris.png"], ["habitants", 1200000], ["surface", 150000], ["created_at", "2021-07-31 07:14:24.017372"], ["updated_at", "2021-07-31 07:14:24.017372"], ["continent_id", 1]]
  [1m[36mTRANSACTION (7.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mContinent Load (0.3ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCity Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "cities" WHERE "cities"."name" = ? AND "cities"."deleted_at" IS NULL LIMIT ?[0m  [["name", "Rosario"], ["LIMIT", 1]]
  [1m[36mCity Create (8.3ms)[0m  [1m[32mINSERT INTO "cities" ("name", "image", "habitants", "surface", "created_at", "updated_at", "continent_id") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Rosario"], ["image", "ros.png"], ["habitants", 100000], ["surface", 20000], ["created_at", "2021-07-31 07:14:49.389085"], ["updated_at", "2021-07-31 07:14:49.389085"], ["continent_id", 2]]
  [1m[36mTRANSACTION (8.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mContinent Load (5.0ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCity Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "cities" WHERE "cities"."name" = ? AND "cities"."deleted_at" IS NULL LIMIT ?[0m  [["name", "Rome"], ["LIMIT", 1]]
  [1m[36mCity Create (4.0ms)[0m  [1m[32mINSERT INTO "cities" ("name", "image", "habitants", "surface", "created_at", "updated_at", "continent_id") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Rome"], ["image", "rome.png"], ["habitants", 12200000], ["surface", 2150000], ["created_at", "2021-07-31 07:14:54.560564"], ["updated_at", "2021-07-31 07:14:54.560564"], ["continent_id", 1]]
  [1m[36mTRANSACTION (4.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mContinent Load (0.3ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Started GET "/cities" for ::1 at 2021-07-31 04:17:20 -0300
  [1m[35m (0.7ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by CitiesController#index as */*
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 741)


Started POST "/users" for ::1 at 2021-07-31 04:17:34 -0300
  
ActionController::RoutingError (No route matches [POST] "/users"):
  
Started POST "/users/login" for ::1 at 2021-07-31 04:18:10 -0300
Processing by UsersController#login as */*
  Parameters: {"email"=>"juan@gmail.com", "password"=>"[FILTERED]", "do"=>"users#login", "user"=>{"email"=>"juan@gmail.com"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "juan@gmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:14:in `login'
Completed 401 Unauthorized in 11ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 4643)


Started POST "/users/register" for ::1 at 2021-07-31 04:18:36 -0300
Processing by UsersController#register as */*
  Parameters: {"email"=>"juan@gmail.com", "password"=>"[FILTERED]", "do"=>"users#register", "user"=>{"email"=>"juan@gmail.com"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/users_controller.rb:5:in `register'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "juan@gmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:5:in `register'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/users_controller.rb:5:in `register'
Completed 200 OK in 74ms (Views: 63.2ms | ActiveRecord: 0.7ms | Allocations: 8634)


Started POST "/users/register" for ::1 at 2021-07-31 04:19:27 -0300
Processing by UsersController#register as */*
  Parameters: {"email"=>"juan@gmail.com", "password"=>"[FILTERED]", "do"=>"users#register", "user"=>{"email"=>"juan@gmail.com"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/users_controller.rb:5:in `register'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "juan@gmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:5:in `register'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/users_controller.rb:5:in `register'
Completed 200 OK in 47ms (Views: 1.6ms | ActiveRecord: 0.4ms | Allocations: 2650)


Started POST "/users/register" for ::1 at 2021-07-31 04:21:04 -0300
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
Processing by UsersController#register as */*
  Parameters: {"email"=>"juan@gmail.com", "password"=>"[FILTERED]", "do"=>"users#register", "user"=>{"email"=>"juan@gmail.com"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/users_controller.rb:5:in `register'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "juan@gmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:5:in `register'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/users_controller.rb:5:in `register'
Completed 200 OK in 12ms (Views: 2.0ms | ActiveRecord: 1.4ms | Allocations: 5105)


Started POST "/users/register" for ::1 at 2021-07-31 04:21:50 -0300
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
Processing by UsersController#register as */*
  Parameters: {"email"=>"juan@gmail.com", "password"=>"[FILTERED]", "do"=>"users#register", "user"=>{"email"=>"juan@gmail.com"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/users_controller.rb:5:in `register'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "juan@gmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:5:in `register'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/users_controller.rb:5:in `register'
Completed 200 OK in 11ms (Views: 1.2ms | ActiveRecord: 2.0ms | Allocations: 5084)


Started POST "/users/register" for ::1 at 2021-07-31 04:22:31 -0300
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
Processing by UsersController#register as */*
  Parameters: {"email"=>"juan@gmail.com", "password"=>"[FILTERED]", "do"=>"users#register", "user"=>{"email"=>"juan@gmail.com"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/users_controller.rb:5:in `register'
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "juan@gmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:5:in `register'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/users_controller.rb:5:in `register'
Completed 200 OK in 13ms (Views: 1.6ms | ActiveRecord: 1.5ms | Allocations: 5075)


Started POST "/users/register" for ::1 at 2021-07-31 04:22:33 -0300
Processing by UsersController#register as */*
  Parameters: {"email"=>"juan@gmail.com", "password"=>"[FILTERED]", "do"=>"users#register", "user"=>{"email"=>"juan@gmail.com"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/users_controller.rb:5:in `register'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "juan@gmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:5:in `register'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/users_controller.rb:5:in `register'
Completed 200 OK in 7ms (Views: 1.4ms | ActiveRecord: 0.4ms | Allocations: 2456)


Started POST "/users/register" for ::1 at 2021-07-31 04:23:30 -0300
Processing by UsersController#register as */*
  Parameters: {"user"=>{"email"=>"juan@gmail.com", "password"=>"[FILTERED]"}, "do"=>"users#register"}
[31mUnpermitted parameter: :password[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/users_controller.rb:5:in `register'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "juan@gmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:5:in `register'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/users_controller.rb:5:in `register'
Completed 200 OK in 8ms (Views: 1.3ms | ActiveRecord: 0.4ms | Allocations: 2492)


Started POST "/users/register" for ::1 at 2021-07-31 04:23:46 -0300
Processing by UsersController#register as */*
  Parameters: {"user"=>{"email"=>"juan@gmail.com", "password"=>"[FILTERED]"}, "do"=>"users#register"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/users_controller.rb:4:in `register'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/users_controller.rb:5:in `register'
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "juan@gmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:5:in `register'
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["email", "juan@gmail.com"], ["password_digest", "$2a$12$VOzCjXC7ZdtgR61khsobJu9c2fuOFcgT8dN30eMuPmiM0Mls9/hou"], ["created_at", "2021-07-31 07:23:47.020763"], ["updated_at", "2021-07-31 07:23:47.020763"]]
  ↳ app/controllers/users_controller.rb:5:in `register'
  [1m[36mTRANSACTION (10.7ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/users_controller.rb:5:in `register'
  Rendering user_notifier_mailer/send_signup_email.html.erb
  Rendered user_notifier_mailer/send_signup_email.html.erb (Duration: 2.0ms | Allocations: 465)
UserNotifierMailer#send_signup_email: processed outbound mail in 24.5ms
Delivered mail 6104fa8312bdf_275c32dc168ab@tp.mail (1686.5ms)
Date: Sat, 31 Jul 2021 04:23:47 -0300
From: grupo36server@gmail.com
To: juan@gmail.com
Message-ID: <6104fa8312bdf_275c32dc168ab@tp.mail>
Subject: Thanks for signing up for our amazing app
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<!DOCTYPE html>
<html>
  <head>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type' />
  </head>
  <body>
    <h1>Thanks for signing up, juan@gmail.com!</h1>
    <p>Thanks for joining and have a great day! Now sign in and do
awesome things!</p>
  </body>
</html>

Completed 200 OK in 2007ms (Views: 0.5ms | ActiveRecord: 12.7ms | Allocations: 18391)


Started POST "/users/login" for ::1 at 2021-07-31 04:23:57 -0300
Processing by UsersController#login as */*
  Parameters: {"email"=>"juan@gmail.com", "password"=>"[FILTERED]", "do"=>"users#login", "user"=>{"email"=>"juan@gmail.com"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "juan@gmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:14:in `login'
Completed 200 OK in 270ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 1247)


Started GET "/cities" for ::1 at 2021-07-31 04:24:27 -0300
Processing by CitiesController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities"."name", "cities"."image", "cities"."habitants", "cities"."id" FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:15:in `index'
Completed 200 OK in 21ms (Views: 11.5ms | ActiveRecord: 1.1ms | Allocations: 9393)


Started POST "/icons" for ::1 at 2021-07-31 04:25:34 -0300
Processing by IconsController#create as */*
  Parameters: {"icon"=>{"name"=>"Obelisco", "image"=>"obe.jpg", "created"=>"10-08-1985", "height"=>1408, "history"=>15, "cities_list"=>"1,2"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/icons_controller.rb:35:in `create'
  [1m[36mIcon Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "icons" WHERE "icons"."name" = ? AND "icons"."deleted_at" IS NULL LIMIT ?[0m  [["name", "Obelisco"], ["LIMIT", 1]]
  ↳ app/controllers/icons_controller.rb:35:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/icons_controller.rb:35:in `create'
Completed 422 Unprocessable Entity in 19ms (Views: 1.3ms | ActiveRecord: 1.2ms | Allocations: 8065)


Started POST "/icons" for ::1 at 2021-07-31 04:25:51 -0300
Processing by IconsController#create as */*
  Parameters: {"icon"=>{"name"=>"Obelisco", "image"=>"obe.jpg", "created"=>"10-08-1985", "height"=>1408, "history"=>"this is the story of obelisco", "cities_list"=>"1,2"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/icons_controller.rb:35:in `create'
  [1m[36mIcon Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "icons" WHERE "icons"."name" = ? AND "icons"."deleted_at" IS NULL LIMIT ?[0m  [["name", "Obelisco"], ["LIMIT", 1]]
  ↳ app/controllers/icons_controller.rb:35:in `create'
  [1m[36mIcon Create (0.7ms)[0m  [1m[32mINSERT INTO "icons" ("name", "image", "created", "height", "history", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Obelisco"], ["image", "obe.jpg"], ["created", "1985-08-10"], ["height", 1408], ["history", "this is the story of obelisco"], ["created_at", "2021-07-31 07:25:51.776441"], ["updated_at", "2021-07-31 07:25:51.776441"]]
  ↳ app/controllers/icons_controller.rb:35:in `create'
  [1m[36mTRANSACTION (8.6ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/icons_controller.rb:35:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/icon.rb:17:in `block in save_cities'
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/icon.rb:17:in `block in save_cities'
  [1m[36mIconCity Create (8.5ms)[0m  [1m[32mINSERT INTO "icon_cities" ("icon_id", "city_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["icon_id", 1], ["city_id", 1], ["created_at", "2021-07-31 07:25:51.813472"], ["updated_at", "2021-07-31 07:25:51.813472"]]
  ↳ app/models/icon.rb:17:in `block in save_cities'
  [1m[36mTRANSACTION (6.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/icon.rb:17:in `block in save_cities'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/icon.rb:17:in `block in save_cities'
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/icon.rb:17:in `block in save_cities'
  [1m[36mIconCity Create (0.4ms)[0m  [1m[32mINSERT INTO "icon_cities" ("icon_id", "city_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["icon_id", 1], ["city_id", 2], ["created_at", "2021-07-31 07:25:51.837217"], ["updated_at", "2021-07-31 07:25:51.837217"]]
  ↳ app/models/icon.rb:17:in `block in save_cities'
  [1m[36mTRANSACTION (4.6ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/icon.rb:17:in `block in save_cities'
Completed 201 Created in 77ms (Views: 0.8ms | ActiveRecord: 31.1ms | Allocations: 20750)


Started GET "/cities" for ::1 at 2021-07-31 04:26:02 -0300
Processing by CitiesController#index as */*
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities"."name", "cities"."image", "cities"."habitants", "cities"."id" FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:15:in `index'
Completed 200 OK in 4ms (Views: 1.6ms | ActiveRecord: 0.2ms | Allocations: 1528)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mIcon Load (0.3ms)[0m  [1m[34mSELECT "icons".* FROM "icons" WHERE "icons"."deleted_at" IS NULL[0m
  [1m[36mIcon Load (1.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" WHERE "icons"."deleted_at" IS NULL AND "icons"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mIcon Load (0.6ms)[0m  [1m[34mSELECT "icons".* FROM "icons" WHERE "icons"."deleted_at" IS NULL AND "icons"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT "cities".* FROM "cities" INNER JOIN "icon_cities" ON "cities"."id" = "icon_cities"."city_id" WHERE "cities"."deleted_at" IS NULL AND "icon_cities"."icon_id" = ?[0m  [["icon_id", 1]]
  [1m[36mCity Load (1.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mIcon Load (0.4ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
Started GET "/cities/1" for ::1 at 2021-07-31 04:27:56 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:58:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
Completed 200 OK in 13ms (Views: 0.4ms | ActiveRecord: 0.5ms | Allocations: 5271)


Started GET "/cities/1" for ::1 at 2021-07-31 04:28:58 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:59:in `set_city'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:59:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
Completed 500 Internal Server Error in 40ms (ActiveRecord: 3.3ms | Allocations: 22790)


  
NameError (undefined local variable or method `city' for #<CitiesController:0x0000000000cdf0>
Did you mean?  @city):
  
app/controllers/cities_controller.rb:25:in `show'
Started GET "/cities/1" for ::1 at 2021-07-31 04:31:18 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:60:in `set_city'
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:60:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
Completed 200 OK in 40ms (Views: 0.2ms | ActiveRecord: 3.1ms | Allocations: 20919)


Started GET "/cities/1" for ::1 at 2021-07-31 04:31:43 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:60:in `set_city'
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:60:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.3ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
Completed 500 Internal Server Error in 37ms (ActiveRecord: 3.1ms | Allocations: 21024)


  
KeyError (key not found: #<City id: 1, name: "Paris", image: "paris.png", habitants: 12...):
  
app/controllers/cities_controller.rb:26:in `fetch'
app/controllers/cities_controller.rb:26:in `show'
Started GET "/cities/1" for ::1 at 2021-07-31 04:33:37 -0300
  
SyntaxError (/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:25: syntax error, unexpected '(', expecting `end'
     city[:icons_](icons_names)
                  ^
):
  
app/controllers/cities_controller.rb:25: syntax error, unexpected '(', expecting `end'
app/controllers/cities_controller.rb:25: syntax error, unexpected '(', expecting `end'
Started GET "/cities/1" for ::1 at 2021-07-31 04:33:49 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:59:in `set_city'
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:59:in `set_city'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.3ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
Completed 500 Internal Server Error in 48ms (ActiveRecord: 3.3ms | Allocations: 22798)


  
NameError (undefined local variable or method `city' for #<CitiesController:0x00000000011b98>
Did you mean?  @city):
  
app/controllers/cities_controller.rb:25:in `show'
Started GET "/cities/1" for ::1 at 2021-07-31 04:34:02 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:59:in `set_city'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:59:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.3ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
Completed 500 Internal Server Error in 55ms (ActiveRecord: 4.2ms | Allocations: 20849)


  
ActiveModel::MissingAttributeError (can't write unknown attribute `icons_`):
  
app/controllers/cities_controller.rb:25:in `show'
Started GET "/cities/1" for ::1 at 2021-07-31 04:34:26 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:60:in `set_city'
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:60:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
Completed 200 OK in 43ms (Views: 0.3ms | ActiveRecord: 3.8ms | Allocations: 20879)


Started GET "/cities/1" for ::1 at 2021-07-31 04:35:17 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:62:in `set_city'
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:62:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
Completed 200 OK in 55ms (Views: 0.4ms | ActiveRecord: 4.1ms | Allocations: 21177)


Started GET "/cities/1" for ::1 at 2021-07-31 04:35:44 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:62:in `set_city'
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:62:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
Completed 500 Internal Server Error in 45ms (ActiveRecord: 3.3ms | Allocations: 20813)


  
ActiveModel::MissingAttributeError (can't write unknown attribute `icons`):
  
app/controllers/cities_controller.rb:27:in `show'
Started GET "/cities/1" for ::1 at 2021-07-31 04:35:57 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:62:in `set_city'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:62:in `set_city'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
Completed 500 Internal Server Error in 42ms (ActiveRecord: 3.4ms | Allocations: 20876)


  
ActiveModel::MissingAttributeError (can't write unknown attribute `iconsm`):
  
app/controllers/cities_controller.rb:27:in `show'
Started GET "/cities/1" for ::1 at 2021-07-31 04:36:13 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:62:in `set_city'
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:62:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.3ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
Completed 200 OK in 57ms (Views: 0.5ms | ActiveRecord: 4.3ms | Allocations: 21178)


Started GET "/cities/1" for ::1 at 2021-07-31 04:36:44 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:62:in `set_city'
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:62:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
Completed 200 OK in 100ms (Views: 0.6ms | ActiveRecord: 3.4ms | Allocations: 21001)


Started GET "/cities/2" for ::1 at 2021-07-31 04:37:07 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:62:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
Completed 200 OK in 9ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 2451)


Started GET "/cities/3" for ::1 at 2021-07-31 04:37:09 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:62:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 3]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
Completed 200 OK in 8ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 2355)


Started GET "/cities/1" for ::1 at 2021-07-31 04:37:15 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:62:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
Completed 200 OK in 7ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 2374)


Started GET "/cities/3" for ::1 at 2021-07-31 04:37:16 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:62:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 3]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
Completed 200 OK in 13ms (Views: 0.8ms | ActiveRecord: 0.5ms | Allocations: 2355)


Started GET "/cities/2" for ::1 at 2021-07-31 04:37:17 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:62:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
Completed 200 OK in 7ms (Views: 0.5ms | ActiveRecord: 0.4ms | Allocations: 2374)


Started GET "/cities/2" for ::1 at 2021-07-31 04:39:32 -0300
  
SyntaxError (/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:21: syntax error, unexpected ':', expecting =>
     city={:city : @city}
                 ^
):
  
app/controllers/cities_controller.rb:21: syntax error, unexpected ':', expecting =>
app/controllers/cities_controller.rb:21: syntax error, unexpected ':', expecting =>
Started GET "/cities/2" for ::1 at 2021-07-31 04:39:45 -0300
  
SyntaxError (/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:21: syntax error, unexpected ':', expecting =>
     city={:city: @city}
                ^
):
  
app/controllers/cities_controller.rb:21: syntax error, unexpected ':', expecting =>
app/controllers/cities_controller.rb:21: syntax error, unexpected ':', expecting =>
Started GET "/cities/2" for ::1 at 2021-07-31 04:40:12 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:60:in `set_city'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:60:in `set_city'
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.3ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
Completed 200 OK in 54ms (Views: 0.5ms | ActiveRecord: 4.7ms | Allocations: 21075)


Started GET "/cities/2" for ::1 at 2021-07-31 04:41:13 -0300
  
SyntaxError (/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:23: syntax error, unexpected symbol literal, expecting '}'
      :icons => icons_names
      ^
/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:24: syntax error, unexpected instance variable
      :continents => @city.continent
                     ^~~~~
/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:25: syntax error, unexpected '}', expecting `end'
      }
      ^
):
  
app/controllers/cities_controller.rb:23: syntax error, unexpected symbol literal, expecting '}'
app/controllers/cities_controller.rb:24: syntax error, unexpected instance variable
app/controllers/cities_controller.rb:25: syntax error, unexpected '}', expecting `end'
app/controllers/cities_controller.rb:23: syntax error, unexpected symbol literal, expecting '}'
app/controllers/cities_controller.rb:24: syntax error, unexpected instance variable
app/controllers/cities_controller.rb:25: syntax error, unexpected '}', expecting `end'
Started GET "/cities/2" for ::1 at 2021-07-31 04:41:27 -0300
  
SyntaxError (/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:23: syntax error, unexpected symbol literal, expecting '}'
      :icons => icons_names
      ^
/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:24: syntax error, unexpected instance variable
      :continent => @city.continent
                    ^~~~~
/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:25: syntax error, unexpected '}', expecting `end'
      }
      ^
):
  
app/controllers/cities_controller.rb:23: syntax error, unexpected symbol literal, expecting '}'
app/controllers/cities_controller.rb:24: syntax error, unexpected instance variable
app/controllers/cities_controller.rb:25: syntax error, unexpected '}', expecting `end'
app/controllers/cities_controller.rb:23: syntax error, unexpected symbol literal, expecting '}'
app/controllers/cities_controller.rb:24: syntax error, unexpected instance variable
app/controllers/cities_controller.rb:25: syntax error, unexpected '}', expecting `end'
Started GET "/cities/2" for ::1 at 2021-07-31 04:42:26 -0300
  
SyntaxError (/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:23: syntax error, unexpected symbol literal, expecting '}'
      :icons => :icons_names
      ^
/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:24: syntax error, unexpected instance variable
      :continent => @city.continent
                    ^~~~~
/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:25: syntax error, unexpected '}', expecting `end'
      }
      ^
):
  
app/controllers/cities_controller.rb:23: syntax error, unexpected symbol literal, expecting '}'
app/controllers/cities_controller.rb:24: syntax error, unexpected instance variable
app/controllers/cities_controller.rb:25: syntax error, unexpected '}', expecting `end'
app/controllers/cities_controller.rb:23: syntax error, unexpected symbol literal, expecting '}'
app/controllers/cities_controller.rb:24: syntax error, unexpected instance variable
app/controllers/cities_controller.rb:25: syntax error, unexpected '}', expecting `end'
Started GET "/cities/2" for ::1 at 2021-07-31 04:42:55 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:64:in `set_city'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:64:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
  [1m[36mContinent Load (0.2ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:24:in `show'
Completed 200 OK in 58ms (Views: 0.5ms | ActiveRecord: 4.4ms | Allocations: 25251)


Started GET "/cities/2" for ::1 at 2021-07-31 04:43:22 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:64:in `set_city'
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:64:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
  [1m[36mContinent Load (0.1ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:24:in `show'
Completed 500 Internal Server Error in 80ms (ActiveRecord: 4.2ms | Allocations: 26957)


  
NameError (undefined local variable or method `continent_id' for #<CitiesController:0x00000000023e38>
Did you mean?  content_type):
  
app/controllers/cities_controller.rb:31:in `show'
Started GET "/cities/2" for ::1 at 2021-07-31 04:43:33 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:64:in `set_city'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:64:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
  [1m[36mContinent Load (0.3ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:24:in `show'
Completed 200 OK in 56ms (Views: 0.5ms | ActiveRecord: 4.7ms | Allocations: 25100)


Started GET "/cities/2" for ::1 at 2021-07-31 04:44:33 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.3ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
Completed 500 Internal Server Error in 49ms (ActiveRecord: 4.3ms | Allocations: 21013)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/controllers/cities_controller.rb:23:in `[]'
app/controllers/cities_controller.rb:23:in `show'
Started GET "/cities/2" for ::1 at 2021-07-31 04:45:06 -0300
  
SyntaxError (/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:24: syntax error, unexpected symbol literal, expecting '}'
      :city[:continent] => @city.con...
      ^
/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:24: syntax error, unexpected instance variable
...     :city[:continent] => @city.continent.name,
...                          ^~~~~
/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:25: syntax error, unexpected =>, expecting '.' or &. or :: or '['
      :icons => icons_names,
             ^~
):
  
app/controllers/cities_controller.rb:24: syntax error, unexpected symbol literal, expecting '}'
app/controllers/cities_controller.rb:24: syntax error, unexpected instance variable
app/controllers/cities_controller.rb:25: syntax error, unexpected =>, expecting '.' or &. or :: or '['
app/controllers/cities_controller.rb:24: syntax error, unexpected symbol literal, expecting '}'
app/controllers/cities_controller.rb:24: syntax error, unexpected instance variable
app/controllers/cities_controller.rb:25: syntax error, unexpected =>, expecting '.' or &. or :: or '['
Started GET "/cities/2" for ::1 at 2021-07-31 04:45:19 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.3ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
  [1m[36mContinent Load (0.2ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:23:in `show'
Completed 500 Internal Server Error in 60ms (ActiveRecord: 5.7ms | Allocations: 24946)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/controllers/cities_controller.rb:24:in `[]'
app/controllers/cities_controller.rb:24:in `show'
Started GET "/cities/2" for ::1 at 2021-07-31 04:45:52 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.3ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
  [1m[36mContinent Load (0.2ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:23:in `show'
Completed 200 OK in 69ms (Views: 0.6ms | ActiveRecord: 5.6ms | Allocations: 25279)


Started GET "/cities/2" for ::1 at 2021-07-31 04:46:40 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.4ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
  [1m[36mContinent Load (0.2ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:23:in `show'
Completed 200 OK in 136ms (Views: 0.6ms | ActiveRecord: 4.3ms | Allocations: 25277)


Started GET "/cities/2" for ::1 at 2021-07-31 04:46:42 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
  [1m[36mContinent Load (0.2ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:23:in `show'
Completed 200 OK in 16ms (Views: 0.9ms | ActiveRecord: 0.6ms | Allocations: 3070)


Started GET "/cities/2" for ::1 at 2021-07-31 04:47:02 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
  [1m[36mContinent Load (0.2ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:23:in `show'
Completed 200 OK in 61ms (Views: 0.5ms | ActiveRecord: 4.4ms | Allocations: 25267)


Started GET "/cities/2" for ::1 at 2021-07-31 04:47:04 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
  [1m[36mContinent Load (0.2ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:23:in `show'
Completed 200 OK in 19ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 3070)


Started GET "/cities/2" for ::1 at 2021-07-31 04:47:40 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
  [1m[36mContinent Load (0.2ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:23:in `show'
Completed 200 OK in 71ms (Views: 0.4ms | ActiveRecord: 5.4ms | Allocations: 25280)


Started GET "/cities/2" for ::1 at 2021-07-31 04:48:17 -0300
  
SyntaxError (/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:22: syntax error, unexpected instance variable, expecting '}'
      :city => @city @city.continent.name,
                     ^~~~~
/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:23: syntax error, unexpected =>, expecting '.' or &. or :: or '['
      :continent => @city.continent.name,
                 ^~
/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:24: syntax error, unexpected =>, expecting '.' or &. or :: or '['
      :city["continent"] => @city.continent.name,
                         ^~
/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:25: syntax error, unexpected =>, expecting '.' or &. or :: or '['
      :icons => icons_names
             ^~
):
  
app/controllers/cities_controller.rb:22: syntax error, unexpected instance variable, expecting '}'
app/controllers/cities_controller.rb:23: syntax error, unexpected =>, expecting '.' or &. or :: or '['
app/controllers/cities_controller.rb:24: syntax error, unexpected =>, expecting '.' or &. or :: or '['
app/controllers/cities_controller.rb:25: syntax error, unexpected =>, expecting '.' or &. or :: or '['
app/controllers/cities_controller.rb:22: syntax error, unexpected instance variable, expecting '}'
app/controllers/cities_controller.rb:23: syntax error, unexpected =>, expecting '.' or &. or :: or '['
app/controllers/cities_controller.rb:24: syntax error, unexpected =>, expecting '.' or &. or :: or '['
app/controllers/cities_controller.rb:25: syntax error, unexpected =>, expecting '.' or &. or :: or '['
Started GET "/cities/2" for ::1 at 2021-07-31 04:48:28 -0300
  
SyntaxError (/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:22: syntax error, unexpected ',', expecting =>
...=> @city, @city.continent.name,
...                              ^
/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:23: syntax error, unexpected instance variable
      :continent => @city.continent.name,
                    ^~~~~
/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:24: syntax error, unexpected =>, expecting '.' or &. or :: or '['
      :city["continent"] => @city.continent.name,
                         ^~
/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:25: syntax error, unexpected =>, expecting '.' or &. or :: or '['
      :icons => icons_names
             ^~
):
  
app/controllers/cities_controller.rb:22: syntax error, unexpected ',', expecting =>
app/controllers/cities_controller.rb:23: syntax error, unexpected instance variable
app/controllers/cities_controller.rb:24: syntax error, unexpected =>, expecting '.' or &. or :: or '['
app/controllers/cities_controller.rb:25: syntax error, unexpected =>, expecting '.' or &. or :: or '['
app/controllers/cities_controller.rb:22: syntax error, unexpected ',', expecting =>
app/controllers/cities_controller.rb:23: syntax error, unexpected instance variable
app/controllers/cities_controller.rb:24: syntax error, unexpected =>, expecting '.' or &. or :: or '['
app/controllers/cities_controller.rb:25: syntax error, unexpected =>, expecting '.' or &. or :: or '['
Started GET "/cities/2" for ::1 at 2021-07-31 04:48:43 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
  [1m[36mContinent Load (0.2ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:23:in `show'
Completed 200 OK in 61ms (Views: 0.7ms | ActiveRecord: 4.8ms | Allocations: 25161)


Started GET "/cities/2" for ::1 at 2021-07-31 04:49:14 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
  [1m[36mContinent Load (0.1ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:23:in `show'
Completed 200 OK in 71ms (Views: 0.6ms | ActiveRecord: 6.0ms | Allocations: 25274)


Started GET "/cities/2" for ::1 at 2021-07-31 04:49:16 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
  [1m[36mContinent Load (0.1ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:23:in `show'
Completed 200 OK in 14ms (Views: 0.6ms | ActiveRecord: 1.7ms | Allocations: 3063)


Started GET "/cities/2" for ::1 at 2021-07-31 04:49:17 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
  [1m[36mContinent Load (0.2ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:23:in `show'
Completed 200 OK in 10ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 2967)


Started GET "/cities/2" for ::1 at 2021-07-31 04:49:34 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
Completed 500 Internal Server Error in 45ms (ActiveRecord: 3.8ms | Allocations: 20796)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/controllers/cities_controller.rb:23:in `[]'
app/controllers/cities_controller.rb:23:in `show'
Started GET "/cities/2" for ::1 at 2021-07-31 04:51:36 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
Completed 500 Internal Server Error in 46ms (ActiveRecord: 3.0ms | Allocations: 20859)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/controllers/cities_controller.rb:23:in `[]'
app/controllers/cities_controller.rb:23:in `show'
Started GET "/cities/2" for ::1 at 2021-07-31 04:51:54 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
Completed 500 Internal Server Error in 52ms (ActiveRecord: 3.6ms | Allocations: 20813)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/controllers/cities_controller.rb:23:in `[]'
app/controllers/cities_controller.rb:23:in `show'
Started GET "/cities/2" for ::1 at 2021-07-31 04:52:06 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
Completed 500 Internal Server Error in 52ms (ActiveRecord: 5.1ms | Allocations: 20792)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/controllers/cities_controller.rb:23:in `[]'
app/controllers/cities_controller.rb:23:in `show'
Started GET "/cities/2" for ::1 at 2021-07-31 04:53:57 -0300
  
SyntaxError (/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:23: syntax error, unexpected ')', expecting '}'
...nent"] => @city.continent.name),
...                              ^
/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:26: syntax error, unexpected '}', expecting `end'
      }
      ^
):
  
app/controllers/cities_controller.rb:23: syntax error, unexpected ')', expecting '}'
app/controllers/cities_controller.rb:26: syntax error, unexpected '}', expecting `end'
app/controllers/cities_controller.rb:23: syntax error, unexpected ')', expecting '}'
app/controllers/cities_controller.rb:26: syntax error, unexpected '}', expecting `end'
Started GET "/cities/2" for ::1 at 2021-07-31 04:54:25 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
  [1m[36mContinent Load (0.3ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:23:in `show'
Completed 200 OK in 57ms (Views: 0.6ms | ActiveRecord: 4.6ms | Allocations: 25160)


Started GET "/cities/2" for ::1 at 2021-07-31 04:54:44 -0300
  
SyntaxError (/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:23: syntax error, unexpected ',', expecting =>
...inent"] = @city.continent.name,
...                              ^
/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:26: syntax error, unexpected '}', expecting `end'
      }
      ^
):
  
app/controllers/cities_controller.rb:23: syntax error, unexpected ',', expecting =>
app/controllers/cities_controller.rb:26: syntax error, unexpected '}', expecting `end'
app/controllers/cities_controller.rb:23: syntax error, unexpected ',', expecting =>
app/controllers/cities_controller.rb:26: syntax error, unexpected '}', expecting `end'
Started GET "/cities/2" for ::1 at 2021-07-31 04:55:29 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
Completed 500 Internal Server Error in 45ms (ActiveRecord: 3.4ms | Allocations: 20813)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/controllers/cities_controller.rb:23:in `[]'
app/controllers/cities_controller.rb:23:in `show'
Started GET "/cities/2" for ::1 at 2021-07-31 04:56:06 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:64:in `set_city'
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:64:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
  [1m[36mContinent Load (0.2ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:23:in `show'
Completed 200 OK in 56ms (Views: 0.7ms | ActiveRecord: 4.2ms | Allocations: 25120)


Started GET "/cities/2" for ::1 at 2021-07-31 05:15:37 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:66:in `set_city'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:66:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 33ms (ActiveRecord: 0.8ms | Allocations: 11366)


  
NoMatchingPatternError (esto):
  
app/controllers/cities_controller.rb:23:in `show'
Started GET "/cities/2" for ::1 at 2021-07-31 05:15:55 -0300
  
SyntaxError (/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:23: syntax error, unexpected '=', expecting `end'
    :esto = "pruebaaaaaaaaaaa"
          ^
):
  
app/controllers/cities_controller.rb:23: syntax error, unexpected '=', expecting `end'
app/controllers/cities_controller.rb:23: syntax error, unexpected '=', expecting `end'
Started GET "/cities/2" for ::1 at 2021-07-31 05:16:24 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:26:in `map'
  [1m[36mContinent Load (0.2ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:29:in `show'
Completed 200 OK in 64ms (Views: 0.8ms | ActiveRecord: 4.0ms | Allocations: 25128)


Started GET "/cities/2" for ::1 at 2021-07-31 05:17:07 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.3ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:26:in `map'
  [1m[36mContinent Load (0.2ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:29:in `show'
Completed 200 OK in 130ms (Views: 0.7ms | ActiveRecord: 5.0ms | Allocations: 25305)


Started GET "/cities/2" for ::1 at 2021-07-31 05:17:50 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.3ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:26:in `map'
  [1m[36mContinent Load (0.2ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:29:in `show'
Completed 200 OK in 64ms (Views: 0.4ms | ActiveRecord: 5.1ms | Allocations: 25257)


Started GET "/cities/2" for ::1 at 2021-07-31 05:18:05 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:65:in `set_city'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:26:in `map'
  [1m[36mContinent Load (0.2ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:29:in `show'
Completed 200 OK in 58ms (Views: 0.6ms | ActiveRecord: 4.5ms | Allocations: 25091)


Started GET "/icons/1" for ::1 at 2021-07-31 05:21:30 -0300
Processing by IconsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/icons_controller.rb:61:in `set_icon'
  [1m[36mIcon Load (0.3ms)[0m  [1m[34mSELECT "icons".* FROM "icons" WHERE "icons"."deleted_at" IS NULL AND "icons"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/icons_controller.rb:61:in `set_icon'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 29ms (ActiveRecord: 2.5ms | Allocations: 12557)


  
NoMethodError (undefined method `cities' for nil:NilClass):
  
app/controllers/icons_controller.rb:23:in `show'
Started GET "/icons/1" for ::1 at 2021-07-31 05:21:44 -0300
Processing by IconsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/icons_controller.rb:61:in `set_icon'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" WHERE "icons"."deleted_at" IS NULL AND "icons"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/icons_controller.rb:61:in `set_icon'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" INNER JOIN "icon_cities" ON "cities"."id" = "icon_cities"."city_id" WHERE "cities"."deleted_at" IS NULL AND "icon_cities"."icon_id" = ?[0m  [["icon_id", 1]]
  ↳ app/controllers/icons_controller.rb:23:in `map'
Completed 200 OK in 45ms (Views: 0.6ms | ActiveRecord: 3.6ms | Allocations: 21044)


Started GET "/icons/1" for ::1 at 2021-07-31 05:22:03 -0300
Processing by IconsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/icons_controller.rb:61:in `set_icon'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" WHERE "icons"."deleted_at" IS NULL AND "icons"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/icons_controller.rb:61:in `set_icon'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" INNER JOIN "icon_cities" ON "cities"."id" = "icon_cities"."city_id" WHERE "cities"."deleted_at" IS NULL AND "icon_cities"."icon_id" = ?[0m  [["icon_id", 1]]
  ↳ app/controllers/icons_controller.rb:23:in `map'
Completed 200 OK in 49ms (Views: 0.5ms | ActiveRecord: 3.1ms | Allocations: 21094)


Started POST "/users/login" for ::1 at 2021-08-01 04:21:47 -0300
  [1m[35m (0.8ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#login as */*
  Parameters: {"email"=>"juan@gmail.com", "password"=>"[FILTERED]", "do"=>"users#login", "user"=>{"email"=>"juan@gmail.com"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "juan@gmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:14:in `login'
Completed 200 OK in 302ms (Views: 0.2ms | ActiveRecord: 1.3ms | Allocations: 7037)


Started GET "/cities/2" for ::1 at 2021-08-01 04:22:15 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:59:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.8ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
  [1m[36mContinent Load (0.4ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:23:in `show'
Completed 200 OK in 76ms (Views: 0.6ms | ActiveRecord: 4.4ms | Allocations: 25207)


Started GET "/cities" for ::1 at 2021-08-01 04:22:21 -0300
Processing by CitiesController#index as */*
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (5.2ms)[0m  [1m[34mSELECT "cities"."name", "cities"."image", "cities"."habitants", "cities"."id" FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:15:in `index'
Completed 200 OK in 12ms (Views: 2.3ms | ActiveRecord: 5.4ms | Allocations: 1593)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddPropertiesToCity (20210801072613)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "cities" ADD "properties" text[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210801072613"]]
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  [1m[36mCity Load (1.0ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCity Load (0.5ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mContinent Load (0.1ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCity Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "cities" WHERE "cities"."name" = ? AND "cities"."deleted_at" IS NULL AND "cities"."id" != ? LIMIT ?[0m  [["name", "Paris"], ["id", 1], ["LIMIT", 1]]
  [1m[36mCity Update (0.3ms)[0m  [1m[33mUPDATE "cities" SET "updated_at" = ?, "properties" = ? WHERE "cities"."id" = ?[0m  [["updated_at", "2021-08-01 07:30:22.998907"], ["properties", "---\n:twitter: \"@juanch\"\n:location: CA\n"], ["id", 1]]
  [1m[36mTRANSACTION (4.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddPropertiesToCity (20210801072613)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TEMPORARY TABLE "acities" ("id" integer NOT NULL PRIMARY KEY, "name" varchar NOT NULL, "image" varchar NOT NULL, "habitants" integer NOT NULL, "surface" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, "continent_id" integer DEFAULT NULL, "deleted_at" datetime DEFAULT NULL, "properties" text DEFAULT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "tindex_acities_on_deleted_at" ON "acities" ("deleted_at")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_acities_on_continent_id" ON "acities" ("continent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "acities" ("id","name","image","habitants","surface","created_at","updated_at","continent_id","deleted_at","properties")
                     SELECT "id","name","image","habitants","surface","created_at","updated_at","continent_id","deleted_at","properties" FROM "cities"[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "cities"[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "cities" ("id" integer NOT NULL PRIMARY KEY, "name" varchar NOT NULL, "image" varchar NOT NULL, "habitants" integer NOT NULL, "surface" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, "continent_id" integer DEFAULT NULL, "deleted_at" datetime DEFAULT NULL, CONSTRAINT "fk_rails_f1f8c45851"
FOREIGN KEY ("continent_id")
  REFERENCES "continents" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_cities_on_continent_id" ON "cities" ("continent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_cities_on_deleted_at" ON "cities" ("deleted_at")[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "cities" ("id","name","image","habitants","surface","created_at","updated_at","continent_id","deleted_at")
                     SELECT "id","name","image","habitants","surface","created_at","updated_at","continent_id","deleted_at" FROM "acities"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "acities"[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mActiveRecord::SchemaMigration Destroy (0.3ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20210801072613"]]
  [1m[36mTRANSACTION (4.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/cities" for ::1 at 2021-08-01 04:42:14 -0300
  [1m[35m (0.7ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by CitiesController#index as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.2ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 2.4ms | ActiveRecord: 0.0ms | Allocations: 1457)


Started POST "/users/login" for ::1 at 2021-08-01 04:42:24 -0300
Processing by UsersController#login as */*
  Parameters: {"email"=>"juan@gmail.com", "password"=>"[FILTERED]", "do"=>"users#login", "user"=>{"email"=>"juan@gmail.com"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "juan@gmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:14:in `login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 310ms (Views: 0.7ms | ActiveRecord: 1.4ms | Allocations: 6869)


Started GET "/cities" for ::1 at 2021-08-01 04:43:25 -0300
Processing by CitiesController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities"."name", "cities"."image", "cities"."habitants", "cities"."id" FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.98ms)
Completed 200 OK in 44ms (Views: 21.1ms | ActiveRecord: 1.3ms | Allocations: 13392)


Started GET "/cities" for ::1 at 2021-08-01 04:44:35 -0300
Processing by CitiesController#index as */*
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:16:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.81ms)
Completed 200 OK in 32ms (Views: 11.5ms | ActiveRecord: 2.5ms | Allocations: 13288)


Started GET "/cities" for ::1 at 2021-08-01 04:44:38 -0300
Processing by CitiesController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:16:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.6ms)
Completed 200 OK in 6ms (Views: 3.3ms | ActiveRecord: 0.3ms | Allocations: 2006)


Started GET "/cities" for ::1 at 2021-08-01 04:44:48 -0300
Processing by CitiesController#index as */*
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:16:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.88ms)
Completed 200 OK in 30ms (Views: 10.9ms | ActiveRecord: 2.2ms | Allocations: 13179)


Started GET "/cities?name=%22Paris%22" for ::1 at 2021-08-01 04:45:22 -0300
Processing by CitiesController#index as */*
  Parameters: {"name"=>"\"Paris\""}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities"."name", "cities"."image", "cities"."habitants", "cities"."id" FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."name" = ? LIMIT ?[0m  [["name", "\"Paris\""], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:7:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 23ms (Views: 0.8ms | ActiveRecord: 2.9ms | Allocations: 9123)


Started GET "/cities" for ::1 at 2021-08-01 04:45:28 -0300
Processing by CitiesController#index as */*
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:16:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.67ms)
Completed 200 OK in 17ms (Views: 14.5ms | ActiveRecord: 0.7ms | Allocations: 5910)


Started GET "/cities?name=Paris" for ::1 at 2021-08-01 04:45:41 -0300
Processing by CitiesController#index as */*
  Parameters: {"name"=>"Paris"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities"."name", "cities"."image", "cities"."habitants", "cities"."id" FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."name" = ? LIMIT ?[0m  [["name", "Paris"], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:7:in `index'
[active_model_serializers] Rendered CitySerializer with ActiveModelSerializers::Adapter::Attributes (0.2ms)
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 1764)


Started GET "/cities/1" for ::1 at 2021-08-01 04:47:58 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:59:in `set_city'
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:59:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
  [1m[36mContinent Load (0.2ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:23:in `show'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.3ms)
Completed 200 OK in 74ms (Views: 1.0ms | ActiveRecord: 4.6ms | Allocations: 28576)


Started GET "/cities/1" for ::1 at 2021-08-01 04:53:16 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:59:in `set_city'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:59:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.3ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
  [1m[36mContinent Load (0.2ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:23:in `show'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.23ms)
Completed 200 OK in 54ms (Views: 0.9ms | ActiveRecord: 1.5ms | Allocations: 23528)


Started GET "/cities" for ::1 at 2021-08-01 04:53:24 -0300
Processing by CitiesController#index as */*
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 3]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (15.49ms)
Completed 200 OK in 32ms (Views: 28.5ms | ActiveRecord: 0.8ms | Allocations: 8956)


Started GET "/cities" for ::1 at 2021-08-01 04:59:36 -0300
Processing by CitiesController#index as */*
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.3ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 3]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (13.66ms)
Completed 200 OK in 24ms (Views: 17.2ms | ActiveRecord: 1.5ms | Allocations: 6648)


Started GET "/cities/1" for ::1 at 2021-08-01 04:59:49 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:59:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
  [1m[36mContinent Load (0.2ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:23:in `show'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.47ms)
Completed 200 OK in 11ms (Views: 1.4ms | ActiveRecord: 0.8ms | Allocations: 3122)


Started GET "/cities/1" for ::1 at 2021-08-01 05:08:48 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:59:in `set_city'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:59:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.4ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
  [1m[36mContinent Load (0.2ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:23:in `show'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.38ms)
Completed 200 OK in 64ms (Views: 1.2ms | ActiveRecord: 1.3ms | Allocations: 23593)


Started GET "/cities/1" for ::1 at 2021-08-01 05:08:50 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:59:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (2.3ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
  [1m[36mContinent Load (0.2ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:23:in `show'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.32ms)
Completed 200 OK in 10ms (Views: 0.9ms | ActiveRecord: 2.7ms | Allocations: 3151)


Started GET "/cities/1" for ::1 at 2021-08-01 05:08:51 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:59:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
  [1m[36mContinent Load (0.1ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:23:in `show'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.25ms)
Completed 200 OK in 9ms (Views: 0.9ms | ActiveRecord: 0.5ms | Allocations: 3059)


Started GET "/cities/1" for ::1 at 2021-08-01 05:08:52 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:59:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
  [1m[36mContinent Load (0.2ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:23:in `show'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.34ms)
Completed 200 OK in 21ms (Views: 0.9ms | ActiveRecord: 0.6ms | Allocations: 3060)


Started GET "/cities/" for ::1 at 2021-08-01 05:08:56 -0300
Processing by CitiesController#index as */*
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 3]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (15.0ms)
Completed 500 Internal Server Error in 21ms (ActiveRecord: 0.8ms | Allocations: 6914)


  
TypeError ({:if=>:index_method?} is not a symbol nor a string):
  
app/controllers/cities_controller.rb:15:in `index'
Started GET "/cities/" for ::1 at 2021-08-01 05:09:58 -0300
Processing by CitiesController#index as */*
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.3ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 3]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (37.96ms)
Completed 500 Internal Server Error in 67ms (ActiveRecord: 4.4ms | Allocations: 25443)


  
TypeError ({:if=>:is_index_method?} is not a symbol nor a string):
  
app/controllers/cities_controller.rb:15:in `index'
Started GET "/cities/" for ::1 at 2021-08-01 05:10:26 -0300
Processing by CitiesController#index as */*
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 3]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (30.87ms)
Completed 500 Internal Server Error in 63ms (ActiveRecord: 4.5ms | Allocations: 25493)


  
TypeError ({:if=>:index} is not a symbol nor a string):
  
app/controllers/cities_controller.rb:15:in `index'
Started GET "/cities/" for ::1 at 2021-08-01 05:17:45 -0300
Processing by CitiesController#index as */*
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:15:in `index'
Completed 500 Internal Server Error in 27ms (ActiveRecord: 0.8ms | Allocations: 11668)


  
SyntaxError (/home/shipnow/alkemy/sights_api/app/serializers/city_serializer.rb:9: syntax error, unexpected end-of-input, expecting `end'):
  
app/serializers/city_serializer.rb:9: syntax error, unexpected end-of-input, expecting `end'
app/serializers/city_serializer.rb:9: syntax error, unexpected end-of-input, expecting `end'
app/controllers/cities_controller.rb:15:in `index'
Started GET "/cities/" for ::1 at 2021-08-01 05:18:31 -0300
Processing by CitiesController#index as */*
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:15:in `index'
Completed 500 Internal Server Error in 33ms (ActiveRecord: 3.1ms | Allocations: 14468)


  
NoMethodError (undefined method `root' for CitySerializer::CompleteCitySerializer:Class):
  
app/serializers/city_serializer.rb:4:in `<class:CompleteCitySerializer>'
app/serializers/city_serializer.rb:3:in `<class:CitySerializer>'
app/serializers/city_serializer.rb:1:in `<main>'
app/controllers/cities_controller.rb:15:in `index'
Started GET "/cities/" for ::1 at 2021-08-01 05:20:53 -0300
Processing by CitiesController#index as */*
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:15:in `index'
Completed 500 Internal Server Error in 40ms (ActiveRecord: 2.4ms | Allocations: 14394)


  
NoMethodError (undefined method `root' for CitySerializer::CompleteCitySerializer:Class):
  
app/serializers/city_serializer.rb:4:in `<class:CompleteCitySerializer>'
app/serializers/city_serializer.rb:3:in `<class:CitySerializer>'
app/serializers/city_serializer.rb:1:in `<main>'
app/controllers/cities_controller.rb:15:in `index'
Started GET "/cities/" for ::1 at 2021-08-01 05:21:06 -0300
Processing by CitiesController#index as */*
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (1.56ms)
Completed 200 OK in 33ms (Views: 12.0ms | ActiveRecord: 2.9ms | Allocations: 13441)


Started GET "/cities/1" for ::1 at 2021-08-01 05:21:12 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:59:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
  [1m[36mContinent Load (0.3ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:23:in `show'
Completed 500 Internal Server Error in 58ms (ActiveRecord: 2.9ms | Allocations: 16008)


  
NameError (uninitialized constant CitiesController::CompleteCitySerializer):
  
app/controllers/cities_controller.rb:26:in `show'
Started GET "/cities/1" for ::1 at 2021-08-01 05:21:55 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:59:in `set_city'
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:59:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.5ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
  [1m[36mContinent Load (0.1ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:23:in `show'
Completed 500 Internal Server Error in 79ms (ActiveRecord: 5.4ms | Allocations: 26747)


  
NameError (uninitialized constant CitiesController::CompleteCitySerializer):
  
app/controllers/cities_controller.rb:26:in `show'
Started GET "/cities/1" for ::1 at 2021-08-01 05:25:43 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:59:in `set_city'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:59:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.3ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
  [1m[36mContinent Load (0.2ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:23:in `show'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.45ms)
Completed 200 OK in 140ms (Views: 1.2ms | ActiveRecord: 5.6ms | Allocations: 25626)


Started GET "/cities/" for ::1 at 2021-08-01 05:25:49 -0300
Processing by CitiesController#index as */*
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.91ms)
Completed 200 OK in 20ms (Views: 15.6ms | ActiveRecord: 0.5ms | Allocations: 2969)


Started GET "/cities/" for ::1 at 2021-08-01 05:26:55 -0300
Processing by CitiesController#index as */*
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 3]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (33.76ms)
Completed 200 OK in 67ms (Views: 44.7ms | ActiveRecord: 4.7ms | Allocations: 26213)


Started GET "/cities/" for ::1 at 2021-08-01 05:27:17 -0300
Processing by CitiesController#index as */*
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 3]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (29.98ms)
Completed 200 OK in 63ms (Views: 39.8ms | ActiveRecord: 4.0ms | Allocations: 26032)


Started GET "/cities/" for ::1 at 2021-08-01 05:27:27 -0300
Processing by CitiesController#index as */*
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
[active_model_serializers] Rendered SimpleCitySerializer with ActiveModelSerializers::Adapter::Attributes (2.24ms)
Completed 500 Internal Server Error in 23ms (ActiveRecord: 1.8ms | Allocations: 9348)


  
NoMethodError (undefined method `model_name' for ActiveRecord::Relation:Class
Did you mean?  module_parent):
  
app/controllers/cities_controller.rb:15:in `index'
Started GET "/cities/" for ::1 at 2021-08-01 05:28:25 -0300
Processing by CitiesController#index as */*
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.3ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 3]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (33.14ms)
Completed 200 OK in 67ms (Views: 42.3ms | ActiveRecord: 4.3ms | Allocations: 26196)


Started GET "/cities/1" for ::1 at 2021-08-01 05:28:30 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:59:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
  ↳ app/controllers/cities_controller.rb:20:in `map'
  [1m[36mContinent Load (0.2ms)[0m  [1m[34mSELECT "continents".* FROM "continents" WHERE "continents"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:23:in `show'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.32ms)
Completed 200 OK in 20ms (Views: 0.9ms | ActiveRecord: 2.7ms | Allocations: 6948)


Started GET "/cities/1" for ::1 at 2021-08-01 05:29:04 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
[active_model_serializers]   [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:20:in `show'
[active_model_serializers] Rendered CitySerializer with ActiveModelSerializers::Adapter::Attributes (23.91ms)
Completed 200 OK in 55ms (Views: 23.0ms | ActiveRecord: 5.0ms | Allocations: 22691)


Started GET "/cities/2" for ::1 at 2021-08-01 05:29:22 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
[active_model_serializers]   [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:20:in `show'
[active_model_serializers] Rendered CitySerializer with ActiveModelSerializers::Adapter::Attributes (4.05ms)
Completed 200 OK in 10ms (Views: 4.7ms | ActiveRecord: 1.0ms | Allocations: 3172)


Started GET "/cities/3" for ::1 at 2021-08-01 05:29:24 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
[active_model_serializers]   [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 3]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:20:in `show'
[active_model_serializers] Rendered CitySerializer with ActiveModelSerializers::Adapter::Attributes (3.02ms)
Completed 200 OK in 8ms (Views: 3.5ms | ActiveRecord: 0.4ms | Allocations: 2793)


Started GET "/cities/1" for ::1 at 2021-08-01 05:29:27 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
[active_model_serializers]   [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:20:in `show'
[active_model_serializers] Rendered CitySerializer with ActiveModelSerializers::Adapter::Attributes (5.37ms)
Completed 200 OK in 10ms (Views: 6.0ms | ActiveRecord: 0.4ms | Allocations: 2900)


Started GET "/cities" for ::1 at 2021-08-01 05:29:33 -0300
Processing by CitiesController#index as */*
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 3]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (14.56ms)
Completed 200 OK in 21ms (Views: 17.7ms | ActiveRecord: 0.7ms | Allocations: 6533)


Started GET "/cities" for ::1 at 2021-08-01 05:31:14 -0300
Processing by CitiesController#index as */*
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.3ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 3]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (37.61ms)
Completed 200 OK in 71ms (Views: 50.6ms | ActiveRecord: 4.3ms | Allocations: 26209)


Started GET "/cities" for ::1 at 2021-08-01 05:31:40 -0300
Processing by CitiesController#index as */*
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.88ms)
Completed 200 OK in 34ms (Views: 13.1ms | ActiveRecord: 2.6ms | Allocations: 13046)


Started GET "/cities" for ::1 at 2021-08-01 05:32:13 -0300
Processing by CitiesController#index as */*
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.51ms)
Completed 200 OK in 30ms (Views: 8.5ms | ActiveRecord: 2.8ms | Allocations: 13037)


Started GET "/cities/1" for ::1 at 2021-08-01 05:32:19 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
[active_model_serializers]   [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:20:in `show'
[active_model_serializers] Rendered CitySerializer with ActiveModelSerializers::Adapter::Attributes (31.77ms)
Completed 200 OK in 39ms (Views: 32.1ms | ActiveRecord: 1.6ms | Allocations: 11655)


Started GET "/cities/1" for ::1 at 2021-08-01 05:32:24 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
[active_model_serializers]   [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:20:in `show'
[active_model_serializers] Rendered CitySerializer with ActiveModelSerializers::Adapter::Attributes (8.7ms)
Completed 200 OK in 13ms (Views: 10.2ms | ActiveRecord: 0.5ms | Allocations: 3173)


Started GET "/cities/1" for ::1 at 2021-08-01 05:33:08 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 28ms (ActiveRecord: 2.2ms | Allocations: 12519)


  
TypeError (superclass must be an instance of Class (given an instance of TrueClass)):
  
app/serializers/city_serializer.rb:1:in `<main>'
app/controllers/cities_controller.rb:20:in `show'
Started GET "/cities/1" for ::1 at 2021-08-01 05:34:38 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 36ms (ActiveRecord: 2.9ms | Allocations: 12476)


  
TypeError (superclass must be an instance of Class (given an instance of TrueClass)):
  
app/serializers/city_serializer.rb:1:in `<main>'
app/controllers/cities_controller.rb:20:in `show'
Started GET "/cities/1" for ::1 at 2021-08-01 05:34:55 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 34ms (ActiveRecord: 2.9ms | Allocations: 12458)


  
TypeError (superclass must be an instance of Class (given an instance of TrueClass)):
  
app/serializers/city_serializer.rb:1:in `<main>'
app/controllers/cities_controller.rb:20:in `show'
Started GET "/cities/1" for ::1 at 2021-08-01 05:35:19 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 29ms (ActiveRecord: 2.2ms | Allocations: 12516)


  
TypeError (superclass must be an instance of Class (given an instance of TrueClass)):
  
app/serializers/city_serializer.rb:1:in `<main>'
app/controllers/cities_controller.rb:20:in `show'
Started GET "/cities/1" for ::1 at 2021-08-01 05:35:33 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 38ms (ActiveRecord: 2.2ms | Allocations: 12600)


  
TypeError (wrong argument type Class (expected Module)):
  
app/serializers/city_serializer.rb:2:in `include'
app/serializers/city_serializer.rb:2:in `<class:CitySerializer>'
app/serializers/city_serializer.rb:1:in `<main>'
app/controllers/cities_controller.rb:20:in `show'
Started GET "/cities/1" for ::1 at 2021-08-01 05:35:56 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 38ms (ActiveRecord: 2.9ms | Allocations: 14193)


  
NoMethodError (undefined method `includes' for CitySerializer:Class
Did you mean?  include
               included
               include?):
  
app/serializers/city_serializer.rb:2:in `<class:CitySerializer>'
app/serializers/city_serializer.rb:1:in `<main>'
app/controllers/cities_controller.rb:20:in `show'
Started GET "/cities/1" for ::1 at 2021-08-01 05:36:10 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
[active_model_serializers]   [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:20:in `show'
[active_model_serializers] Rendered CitySerializer with ActiveModelSerializers::Adapter::Attributes (27.7ms)
Completed 200 OK in 64ms (Views: 28.0ms | ActiveRecord: 4.4ms | Allocations: 22898)


Started GET "/cities/1" for ::1 at 2021-08-01 05:36:26 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
[active_model_serializers]   [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:20:in `show'
[active_model_serializers] Rendered CitySerializer with ActiveModelSerializers::Adapter::Attributes (8.31ms)
Completed 200 OK in 18ms (Views: 10.2ms | ActiveRecord: 0.6ms | Allocations: 3172)


Started GET "/cities" for ::1 at 2021-08-01 05:36:30 -0300
Processing by CitiesController#index as */*
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.68ms)
Completed 200 OK in 6ms (Views: 3.7ms | ActiveRecord: 0.4ms | Allocations: 1796)


Started GET "/cities/1" for ::1 at 2021-08-01 05:36:34 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
[active_model_serializers]   [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:20:in `show'
[active_model_serializers] Rendered CitySerializer with ActiveModelSerializers::Adapter::Attributes (7.4ms)
Completed 200 OK in 13ms (Views: 8.3ms | ActiveRecord: 0.5ms | Allocations: 2900)


Started GET "/cities/1" for ::1 at 2021-08-01 05:36:45 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 34ms (ActiveRecord: 2.4ms | Allocations: 13617)


  
NoMethodError (undefined method `attributes' for CitySerializer:Class
Did you mean?  attr_writer):
  
app/serializers/city_serializer.rb:3:in `<class:CitySerializer>'
app/serializers/city_serializer.rb:1:in `<main>'
app/controllers/cities_controller.rb:20:in `show'
Started GET "/cities/1" for ::1 at 2021-08-01 05:37:23 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
[active_model_serializers]   [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:20:in `show'
[active_model_serializers] Rendered CitySerializer with ActiveModelSerializers::Adapter::Attributes (22.8ms)
Completed 200 OK in 54ms (Views: 22.6ms | ActiveRecord: 3.7ms | Allocations: 22467)


Started GET "/cities/1" for ::1 at 2021-08-01 05:37:51 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
[active_model_serializers]   [1m[36mIcon Load (0.3ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:20:in `show'
[active_model_serializers] Rendered CitySerializer with ActiveModelSerializers::Adapter::Attributes (21.97ms)
Completed 200 OK in 51ms (Views: 21.2ms | ActiveRecord: 4.1ms | Allocations: 22674)


Started GET "/cities?name=Paris" for ::1 at 2021-08-01 05:39:12 -0300
Processing by CitiesController#index as */*
  Parameters: {"name"=>"Paris"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."name" = ? LIMIT ?[0m  [["name", "Paris"], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:7:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers] Rendered CitySerializer with ActiveModelSerializers::Adapter::Attributes (6.15ms)
Completed 200 OK in 13ms (Views: 7.3ms | ActiveRecord: 0.6ms | Allocations: 3227)


Started GET "/cities?name=Paris" for ::1 at 2021-08-01 05:39:15 -0300
Processing by CitiesController#index as */*
  Parameters: {"name"=>"Paris"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."name" = ? LIMIT ?[0m  [["name", "Paris"], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:7:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers] Rendered CitySerializer with ActiveModelSerializers::Adapter::Attributes (6.15ms)
Completed 200 OK in 13ms (Views: 7.5ms | ActiveRecord: 0.5ms | Allocations: 2881)


Started GET "/cities?name=Paris" for ::1 at 2021-08-01 05:39:16 -0300
Processing by CitiesController#index as */*
  Parameters: {"name"=>"Paris"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."name" = ? LIMIT ?[0m  [["name", "Paris"], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:7:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers] Rendered CitySerializer with ActiveModelSerializers::Adapter::Attributes (4.78ms)
Completed 200 OK in 10ms (Views: 6.0ms | ActiveRecord: 0.4ms | Allocations: 2880)


Started GET "/cities?name=Paris" for ::1 at 2021-08-01 05:42:57 -0300
Processing by CitiesController#index as */*
  Parameters: {"name"=>"Paris"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."name" = ? LIMIT ?[0m  [["name", "Paris"], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:7:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers] Rendered CitySerializer with ActiveModelSerializers::Adapter::Attributes (22.44ms)
Completed 200 OK in 53ms (Views: 22.5ms | ActiveRecord: 3.8ms | Allocations: 22915)


Started GET "/cities?name=Paris" for ::1 at 2021-08-01 05:43:00 -0300
Processing by CitiesController#index as */*
  Parameters: {"name"=>"Paris"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."name" = ? LIMIT ?[0m  [["name", "Paris"], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:7:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers] Rendered CitySerializer with ActiveModelSerializers::Adapter::Attributes (5.89ms)
Completed 200 OK in 11ms (Views: 6.5ms | ActiveRecord: 0.4ms | Allocations: 3159)


Started GET "/cities?name=Paris" for ::1 at 2021-08-01 05:43:01 -0300
Processing by CitiesController#index as */*
  Parameters: {"name"=>"Paris"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."name" = ? LIMIT ?[0m  [["name", "Paris"], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:7:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers] Rendered CitySerializer with ActiveModelSerializers::Adapter::Attributes (4.22ms)
Completed 200 OK in 9ms (Views: 4.8ms | ActiveRecord: 0.8ms | Allocations: 2882)


Started GET "/cities?name=Paris" for ::1 at 2021-08-01 05:43:02 -0300
Processing by CitiesController#index as */*
  Parameters: {"name"=>"Paris"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."name" = ? LIMIT ?[0m  [["name", "Paris"], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:7:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers] Rendered CitySerializer with ActiveModelSerializers::Adapter::Attributes (5.64ms)
Completed 200 OK in 11ms (Views: 6.1ms | ActiveRecord: 0.4ms | Allocations: 2881)


Started GET "/cities?name=Paris" for ::1 at 2021-08-01 05:43:20 -0300
Processing by CitiesController#index as */*
  Parameters: {"name"=>"Paris"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."name" = ? LIMIT ?[0m  [["name", "Paris"], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:7:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers] Rendered CitySerializer with ActiveModelSerializers::Adapter::Attributes (6.77ms)
Completed 200 OK in 15ms (Views: 7.2ms | ActiveRecord: 0.4ms | Allocations: 2881)


Started GET "/cities?name=Paris" for ::1 at 2021-08-01 05:44:18 -0300
Processing by CitiesController#index as */*
  Parameters: {"name"=>"Paris"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."name" = ? LIMIT ?[0m  [["name", "Paris"], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:7:in `index'
Completed 500 Internal Server Error in 40ms (ActiveRecord: 2.6ms | Allocations: 14165)


  
NameError (undefined local variable or method `serialize_select' for #<CitiesController:0x00000000031880>
Did you mean?  serialization_scope):
  
app/controllers/cities_controller.rb:15:in `index'
Started GET "/cities?name=Paris" for ::1 at 2021-08-01 05:44:59 -0300
Processing by CitiesController#index as */*
  Parameters: {"name"=>"Paris"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."name" = ? LIMIT ?[0m  [["name", "Paris"], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:7:in `index'
[active_model_serializers] Rendered SimpleCitySerializer with ActiveModelSerializers::Adapter::Attributes (0.3ms)
Completed 200 OK in 30ms (Views: 0.7ms | ActiveRecord: 2.5ms | Allocations: 12865)


Started GET "/cities?name=Paris" for ::1 at 2021-08-01 05:45:02 -0300
Processing by CitiesController#index as */*
  Parameters: {"name"=>"Paris"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."name" = ? LIMIT ?[0m  [["name", "Paris"], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:7:in `index'
[active_model_serializers] Rendered SimpleCitySerializer with ActiveModelSerializers::Adapter::Attributes (0.22ms)
Completed 200 OK in 5ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 1652)


Started GET "/cities" for ::1 at 2021-08-01 05:45:09 -0300
Processing by CitiesController#index as */*
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
[active_model_serializers] Rendered SimpleCitySerializer with ActiveModelSerializers::Adapter::Attributes (3.58ms)
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.1ms | Allocations: 1741)


  
NoMethodError (undefined method `model_name' for ActiveRecord::Relation:Class
Did you mean?  module_parent):
  
app/controllers/cities_controller.rb:16:in `index'
Started GET "/cities" for ::1 at 2021-08-01 05:45:42 -0300
  
SyntaxError (/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:16: syntax error, unexpected '\n', expecting =>
/home/shipnow/alkemy/sights_api/app/controllers/cities_controller.rb:62: syntax error, unexpected end-of-input, expecting `end'):
  
app/controllers/cities_controller.rb:16: syntax error, unexpected '\n', expecting =>
app/controllers/cities_controller.rb:62: syntax error, unexpected end-of-input, expecting `end'
app/controllers/cities_controller.rb:16: syntax error, unexpected '\n', expecting =>
app/controllers/cities_controller.rb:62: syntax error, unexpected end-of-input, expecting `end'
Started GET "/cities" for ::1 at 2021-08-01 05:47:01 -0300
Processing by CitiesController#index as */*
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:16:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.6ms)
Completed 200 OK in 30ms (Views: 9.2ms | ActiveRecord: 2.9ms | Allocations: 13107)


Started GET "/cities?name" for ::1 at 2021-08-01 05:47:15 -0300
Processing by CitiesController#index as */*
  Parameters: {"name"=>nil}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:16:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.79ms)
Completed 200 OK in 8ms (Views: 5.5ms | ActiveRecord: 0.3ms | Allocations: 1841)


Started GET "/cities?name=Paris" for ::1 at 2021-08-01 05:47:19 -0300
Processing by CitiesController#index as */*
  Parameters: {"name"=>"Paris"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."name" = ? LIMIT ?[0m  [["name", "Paris"], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:7:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:16:in `index'
[active_model_serializers] Rendered CitySerializer with ActiveModelSerializers::Adapter::Attributes (24.55ms)
Completed 200 OK in 32ms (Views: 25.0ms | ActiveRecord: 1.6ms | Allocations: 11584)


Started GET "/cities?name=Paris" for ::1 at 2021-08-01 05:51:03 -0300
Processing by CitiesController#index as */*
  Parameters: {"name"=>"Paris"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."name" = ? LIMIT ?[0m  [["name", "Paris"], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:7:in `index'
Completed 500 Internal Server Error in 33ms (ActiveRecord: 2.4ms | Allocations: 14720)


  
NoMethodError (undefined method `length' for #<City id: 1, name: "Paris", image: "paris.png", habitants: 1200000, surface: 150000, created_at: "2021-07-31 07:14:24.017372000 +0000", updated_at: "2021-08-01 07:30:22.998907000 +0000", continent_id: 1, deleted_at: nil>):
  
app/controllers/cities_controller.rb:14:in `index'
Started GET "/cities?name=Paris" for ::1 at 2021-08-01 05:51:20 -0300
Processing by CitiesController#index as */*
  Parameters: {"name"=>"Paris"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."name" = ? LIMIT ?[0m  [["name", "Paris"], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:7:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.3ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:16:in `index'
[active_model_serializers] Rendered CitySerializer with ActiveModelSerializers::Adapter::Attributes (19.16ms)
Completed 200 OK in 51ms (Views: 19.5ms | ActiveRecord: 4.4ms | Allocations: 22804)


Started GET "/cities" for ::1 at 2021-08-01 05:51:30 -0300
Processing by CitiesController#index as */*
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:16:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.1ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 3]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:16:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (20.04ms)
Completed 200 OK in 25ms (Views: 22.3ms | ActiveRecord: 0.8ms | Allocations: 6318)


Started GET "/cities?name=Paris" for ::1 at 2021-08-01 05:51:58 -0300
Processing by CitiesController#index as */*
  Parameters: {"name"=>"Paris"}
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."name" = ? LIMIT ?[0m  [["name", "Paris"], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:7:in `index'
[active_model_serializers]   [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:16:in `index'
[active_model_serializers] Rendered CitySerializer with ActiveModelSerializers::Adapter::Attributes (21.27ms)
Completed 200 OK in 58ms (Views: 21.2ms | ActiveRecord: 4.4ms | Allocations: 22902)


Started GET "/cities" for ::1 at 2021-08-01 05:52:04 -0300
Processing by CitiesController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:16:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.91ms)
Completed 200 OK in 10ms (Views: 6.3ms | ActiveRecord: 0.4ms | Allocations: 2009)


Started GET "/icons/1" for ::1 at 2021-08-01 06:00:06 -0300
Processing by IconsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/icons_controller.rb:56:in `set_icon'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" WHERE "icons"."deleted_at" IS NULL AND "icons"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/icons_controller.rb:56:in `set_icon'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 35ms (ActiveRecord: 0.9ms | Allocations: 11639)


  
Zeitwerk::NameError (expected file /home/shipnow/alkemy/sights_api/app/serializers/simple_icon_serializer.rb to define constant SimpleIconSerializer, but didn't):
  
app/serializers/icon_serializer.rb:1:in `<main>'
app/controllers/icons_controller.rb:23:in `show'
Started GET "/icons/1" for ::1 at 2021-08-01 06:01:20 -0300
Processing by IconsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/icons_controller.rb:56:in `set_icon'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" WHERE "icons"."deleted_at" IS NULL AND "icons"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/icons_controller.rb:56:in `set_icon'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 94ms (ActiveRecord: 2.8ms | Allocations: 14108)


  
NameError (uninitialized constant SimpleIconSerializer
Did you mean?  SimpleCitySerializer):
  
app/serializers/icon_serializer.rb:1:in `<main>'
app/controllers/icons_controller.rb:23:in `show'
Started GET "/icons/1" for ::1 at 2021-08-01 06:02:02 -0300
Processing by IconsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/icons_controller.rb:56:in `set_icon'
  [1m[36mIcon Load (0.3ms)[0m  [1m[34mSELECT "icons".* FROM "icons" WHERE "icons"."deleted_at" IS NULL AND "icons"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/icons_controller.rb:56:in `set_icon'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 37ms (ActiveRecord: 3.7ms | Allocations: 13760)


  
NameError (uninitialized constant SimpleIconSerializer
Did you mean?  SimpleCitySerializer):
  
app/serializers/icon_serializer.rb:1:in `<main>'
app/controllers/icons_controller.rb:23:in `show'
Started GET "/icons/1" for ::1 at 2021-08-01 06:02:21 -0300
Processing by IconsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/icons_controller.rb:56:in `set_icon'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" WHERE "icons"."deleted_at" IS NULL AND "icons"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/icons_controller.rb:56:in `set_icon'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
[active_model_serializers]   [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" INNER JOIN "icon_cities" ON "cities"."id" = "icon_cities"."city_id" WHERE "cities"."deleted_at" IS NULL AND "icon_cities"."icon_id" = ?[0m  [["icon_id", 1]]
[active_model_serializers]   ↳ app/controllers/icons_controller.rb:23:in `show'
[active_model_serializers] Rendered IconSerializer with ActiveModelSerializers::Adapter::Attributes (24.46ms)
Completed 200 OK in 56ms (Views: 23.7ms | ActiveRecord: 3.3ms | Allocations: 23146)


Started GET "/cities" for ::1 at 2021-08-01 06:04:06 -0300
Processing by CitiesController#index as */*
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.69ms)
Completed 200 OK in 11ms (Views: 7.1ms | ActiveRecord: 0.7ms | Allocations: 2122)


Started GET "/cities/1" for ::1 at 2021-08-01 06:04:09 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mCity Load (0.4ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
[active_model_serializers]   [1m[36mIcon Load (0.4ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:20:in `show'
[active_model_serializers] Rendered CitySerializer with ActiveModelSerializers::Adapter::Attributes (15.55ms)
Completed 200 OK in 19ms (Views: 15.7ms | ActiveRecord: 0.8ms | Allocations: 3434)


Started GET "/icons/1" for ::1 at 2021-08-01 06:05:16 -0300
Processing by IconsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/icons_controller.rb:56:in `set_icon'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" WHERE "icons"."deleted_at" IS NULL AND "icons"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/icons_controller.rb:56:in `set_icon'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
[active_model_serializers]   [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" INNER JOIN "icon_cities" ON "cities"."id" = "icon_cities"."city_id" WHERE "cities"."deleted_at" IS NULL AND "icon_cities"."icon_id" = ?[0m  [["icon_id", 1]]
[active_model_serializers]   ↳ app/controllers/icons_controller.rb:23:in `show'
[active_model_serializers] Rendered IconSerializer with ActiveModelSerializers::Adapter::Attributes (27.28ms)
Completed 200 OK in 57ms (Views: 26.9ms | ActiveRecord: 3.5ms | Allocations: 23096)


Started GET "/icons" for ::1 at 2021-08-01 06:05:21 -0300
Processing by IconsController#index as */*
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" WHERE "icons"."deleted_at" IS NULL[0m
  ↳ app/controllers/icons_controller.rb:18:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.68ms)
Completed 200 OK in 7ms (Views: 4.1ms | ActiveRecord: 0.3ms | Allocations: 1771)


Started GET "/icons" for ::1 at 2021-08-01 06:05:46 -0300
Processing by IconsController#index as */*
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" WHERE "icons"."deleted_at" IS NULL[0m
  ↳ app/controllers/icons_controller.rb:18:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.61ms)
Completed 200 OK in 29ms (Views: 10.1ms | ActiveRecord: 2.6ms | Allocations: 12387)


Started GET "/icons/1" for ::1 at 2021-08-01 06:05:55 -0300
Processing by IconsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mIcon Load (0.3ms)[0m  [1m[34mSELECT "icons".* FROM "icons" WHERE "icons"."deleted_at" IS NULL AND "icons"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/icons_controller.rb:56:in `set_icon'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
[active_model_serializers]   [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" INNER JOIN "icon_cities" ON "cities"."id" = "icon_cities"."city_id" WHERE "cities"."deleted_at" IS NULL AND "icon_cities"."icon_id" = ?[0m  [["icon_id", 1]]
[active_model_serializers]   ↳ app/controllers/icons_controller.rb:23:in `show'
[active_model_serializers] Rendered IconSerializer with ActiveModelSerializers::Adapter::Attributes (27.76ms)
Completed 200 OK in 39ms (Views: 26.7ms | ActiveRecord: 2.1ms | Allocations: 13330)


Started GET "/icons/1" for ::1 at 2021-08-01 06:06:28 -0300
Processing by IconsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/icons_controller.rb:56:in `set_icon'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" WHERE "icons"."deleted_at" IS NULL AND "icons"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/icons_controller.rb:56:in `set_icon'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 31ms (ActiveRecord: 3.2ms | Allocations: 12119)


  
SyntaxError (/home/shipnow/alkemy/sights_api/app/serializers/icon_serializer.rb:3: syntax error, unexpected ':', expecting `end'
  has_many :cities, only : [:name]
                         ^
):
  
app/serializers/icon_serializer.rb:3: syntax error, unexpected ':', expecting `end'
app/serializers/icon_serializer.rb:3: syntax error, unexpected ':', expecting `end'
app/controllers/icons_controller.rb:23:in `show'
Started GET "/icons/1" for ::1 at 2021-08-01 06:06:38 -0300
Processing by IconsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/icons_controller.rb:56:in `set_icon'
  [1m[36mIcon Load (0.3ms)[0m  [1m[34mSELECT "icons".* FROM "icons" WHERE "icons"."deleted_at" IS NULL AND "icons"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/icons_controller.rb:56:in `set_icon'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
[active_model_serializers]   [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" INNER JOIN "icon_cities" ON "cities"."id" = "icon_cities"."city_id" WHERE "cities"."deleted_at" IS NULL AND "icon_cities"."icon_id" = ?[0m  [["icon_id", 1]]
[active_model_serializers]   ↳ app/controllers/icons_controller.rb:23:in `show'
[active_model_serializers] Rendered IconSerializer with ActiveModelSerializers::Adapter::Attributes (21.3ms)
Completed 200 OK in 52ms (Views: 20.9ms | ActiveRecord: 3.2ms | Allocations: 22933)


Started GET "/icons/1" for ::1 at 2021-08-01 06:07:06 -0300
Processing by IconsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/icons_controller.rb:56:in `set_icon'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" WHERE "icons"."deleted_at" IS NULL AND "icons"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/icons_controller.rb:56:in `set_icon'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 28ms (ActiveRecord: 2.5ms | Allocations: 12119)


  
SyntaxError (/home/shipnow/alkemy/sights_api/app/serializers/icon_serializer.rb:3: syntax error, unexpected symbol literal, expecting `do' or '{' or '('
... has_many :cities, attributes :name
...                              ^
):
  
app/serializers/icon_serializer.rb:3: syntax error, unexpected symbol literal, expecting `do' or '{' or '('
app/serializers/icon_serializer.rb:3: syntax error, unexpected symbol literal, expecting `do' or '{' or '('
app/controllers/icons_controller.rb:23:in `show'
Started GET "/icons/1" for ::1 at 2021-08-01 06:08:39 -0300
Processing by IconsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/icons_controller.rb:56:in `set_icon'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" WHERE "icons"."deleted_at" IS NULL AND "icons"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/icons_controller.rb:56:in `set_icon'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
[active_model_serializers]   [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" INNER JOIN "icon_cities" ON "cities"."id" = "icon_cities"."city_id" WHERE "cities"."deleted_at" IS NULL AND "icon_cities"."icon_id" = ?[0m  [["icon_id", 1]]
[active_model_serializers]   ↳ app/controllers/icons_controller.rb:23:in `show'
[active_model_serializers] Rendered IconSerializer with ActiveModelSerializers::Adapter::Attributes (22.6ms)
Completed 200 OK in 49ms (Views: 22.3ms | ActiveRecord: 3.3ms | Allocations: 22923)


Started GET "/cities/1" for ::1 at 2021-08-01 06:08:51 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
[active_model_serializers]   [1m[36mIcon Load (0.3ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:20:in `show'
[active_model_serializers] Rendered CitySerializer with ActiveModelSerializers::Adapter::Attributes (7.46ms)
Completed 200 OK in 17ms (Views: 12.9ms | ActiveRecord: 0.6ms | Allocations: 3760)


Started GET "/cities/2" for ::1 at 2021-08-01 06:08:59 -0300
Processing by CitiesController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mCity Load (0.1ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/cities_controller.rb:53:in `set_city'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
[active_model_serializers]   [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" INNER JOIN "icon_cities" ON "icons"."id" = "icon_cities"."icon_id" WHERE "icons"."deleted_at" IS NULL AND "icon_cities"."city_id" = ?[0m  [["city_id", 2]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:20:in `show'
[active_model_serializers] Rendered CitySerializer with ActiveModelSerializers::Adapter::Attributes (5.58ms)
Completed 200 OK in 13ms (Views: 6.9ms | ActiveRecord: 0.5ms | Allocations: 2954)


Started GET "/icons?cities=Paris" for ::1 at 2021-08-01 06:09:50 -0300
Processing by IconsController#index as */*
  Parameters: {"cities"=>"Paris"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
[active_model_serializers] Rendered SimpleIconSerializer with Hash (0.06ms)
Completed 200 OK in 4ms (Views: 0.9ms | ActiveRecord: 0.2ms | Allocations: 859)


Started GET "/icons?cities=1" for ::1 at 2021-08-01 06:09:53 -0300
Processing by IconsController#index as */*
  Parameters: {"cities"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
[active_model_serializers] Rendered SimpleIconSerializer with Hash (0.08ms)
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.1ms | Allocations: 741)


Started GET "/icons?cities=1" for ::1 at 2021-08-01 06:10:09 -0300
Processing by IconsController#index as */*
  Parameters: {"cities"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons"."name", "icons"."image", "icons"."id" FROM "icons" WHERE "icons"."deleted_at" IS NULL AND "icons"."id" IN (SELECT "icon_cities"."icon_id" FROM "icon_cities" WHERE "icon_cities"."city_id" = ?)[0m  [["city_id", 1]]
  ↳ app/controllers/icons_controller.rb:18:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.35ms)
Completed 200 OK in 34ms (Views: 9.1ms | ActiveRecord: 3.0ms | Allocations: 13873)


Started GET "/icons?cities=1" for ::1 at 2021-08-01 06:11:01 -0300
Processing by IconsController#index as */*
  Parameters: {"cities"=>"1"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" WHERE "icons"."deleted_at" IS NULL AND "icons"."id" IN (SELECT "icon_cities"."icon_id" FROM "icon_cities" WHERE "icon_cities"."city_id" = ?)[0m  [["city_id", 1]]
  ↳ app/controllers/icons_controller.rb:18:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.62ms)
Completed 200 OK in 34ms (Views: 11.2ms | ActiveRecord: 2.7ms | Allocations: 13739)


Started GET "/icons" for ::1 at 2021-08-04 21:14:53 -0300
  [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by IconsController#index as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 2.9ms | ActiveRecord: 0.0ms | Allocations: 1374)


Started POST "/users/login" for ::1 at 2021-08-04 21:14:59 -0300
Processing by UsersController#login as */*
  Parameters: {"email"=>"juan@gmail.com", "password"=>"[FILTERED]", "do"=>"users#login", "user"=>{"email"=>"juan@gmail.com"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "juan@gmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:14:in `login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 284ms (Views: 0.7ms | ActiveRecord: 0.9ms | Allocations: 6865)


Started GET "/icons" for ::1 at 2021-08-04 21:15:23 -0300
Processing by IconsController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" WHERE "icons"."deleted_at" IS NULL[0m
  ↳ app/controllers/icons_controller.rb:18:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (66.19ms)
Completed 500 Internal Server Error in 115ms (ActiveRecord: 1.2ms | Allocations: 12983)


  
NoMethodError (undefined method `url' for "obe.jpg":String):
  
app/models/icon.rb:13:in `image_url'
app/controllers/icons_controller.rb:18:in `index'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateActiveStorageTables (20210805014735)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar NOT NULL, "created_at" datetime NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" integer NOT NULL, "blob_id" integer NOT NULL, "created_at" datetime NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" integer NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[36mActiveRecord::SchemaMigration Create (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210805014735"]]
  [1m[36mTRANSACTION (9.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (2.8ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/icons" for ::1 at 2021-08-04 22:50:54 -0300
  [1m[35m (0.9ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by IconsController#index as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" WHERE "icons"."deleted_at" IS NULL[0m
  ↳ app/controllers/icons_controller.rb:18:in `index'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Icon"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/models/icon.rb:15:in `image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (25.01ms)
Completed 200 OK in 185ms (Views: 49.2ms | ActiveRecord: 3.4ms | Allocations: 23230)


Started POST "/icons" for ::1 at 2021-08-04 22:51:13 -0300
Processing by IconsController#create as */*
  Parameters: {"icon"=>{"name"=>"OtherIcon2", "image"=>#<ActionDispatch::Http::UploadedFile:0x0000555f3c01cf70 @tempfile=#<Tempfile:/tmp/RackMultipart20210804-13087-qru6m2.jpg>, @original_filename="pira.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"icon[image]\"; filename=\"pira.jpg\"\r\nContent-Type: image/jpeg\r\n">, "created"=>"03-06-1501", "height"=>"44", "history"=>"This is Other story....", "cities_ids"=>["2,3"]}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 1.9ms | ActiveRecord: 0.0ms | Allocations: 860)


Started POST "/icons" for ::1 at 2021-08-04 22:51:53 -0300
Processing by IconsController#create as */*
  Parameters: {"icon"=>{"name"=>"OtherIcon2", "image"=>#<ActionDispatch::Http::UploadedFile:0x0000555f3c0b4be0 @tempfile=#<Tempfile:/tmp/RackMultipart20210804-13087-xgxz2.jpg>, @original_filename="pira.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"icon[image]\"; filename=\"pira.jpg\"\r\nContent-Type: image/jpeg\r\n">, "created"=>"03-06-1501", "height"=>"44", "history"=>"This is Other story....", "cities_ids"=>["2,3"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
[31mUnpermitted parameter: :cities_ids[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/icons_controller.rb:30:in `create'
  [1m[36mIcon Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "icons" WHERE "icons"."name" = ? AND "icons"."deleted_at" IS NULL LIMIT ?[0m  [["name", "OtherIcon2"], ["LIMIT", 1]]
  ↳ app/controllers/icons_controller.rb:30:in `create'
  [1m[36mIcon Create (0.6ms)[0m  [1m[32mINSERT INTO "icons" ("name", "created", "height", "history", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "OtherIcon2"], ["created", "1501-06-03"], ["height", 44], ["history", "This is Other story...."], ["created_at", "2021-08-05 01:51:53.676559"], ["updated_at", "2021-08-05 01:51:53.676559"]]
  ↳ app/controllers/icons_controller.rb:30:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/icons_controller.rb:30:in `create'
Completed 500 Internal Server Error in 112ms (ActiveRecord: 2.5ms | Allocations: 21315)


  
ActiveRecord::NotNullViolation (SQLite3::ConstraintException: NOT NULL constraint failed: icons.image):
  
app/controllers/icons_controller.rb:30:in `create'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to RemoveImageFromIcons (20210805015439)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aicons" ("id" integer NOT NULL PRIMARY KEY, "name" varchar NOT NULL, "image" varchar NOT NULL, "created" date NOT NULL, "height" integer NOT NULL, "history" varchar NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, "deleted_at" datetime DEFAULT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "tindex_aicons_on_deleted_at" ON "aicons" ("deleted_at")[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "aicons" ("id","name","image","created","height","history","created_at","updated_at","deleted_at")
                     SELECT "id","name","image","created","height","history","created_at","updated_at","deleted_at" FROM "icons"[0m
  [1m[35m (1.7ms)[0m  [1m[35mDROP TABLE "icons"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "icons" ("id" integer NOT NULL PRIMARY KEY, "name" varchar NOT NULL, "created" date NOT NULL, "height" integer NOT NULL, "history" varchar NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, "deleted_at" datetime DEFAULT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_icons_on_deleted_at" ON "icons" ("deleted_at")[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "icons" ("id","name","created","height","history","created_at","updated_at","deleted_at")
                     SELECT "id","name","created","height","history","created_at","updated_at","deleted_at" FROM "aicons"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "aicons"[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210805015439"]]
  [1m[36mTRANSACTION (7.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to RemoveImageFromCities (20210805015545)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TEMPORARY TABLE "acities" ("id" integer NOT NULL PRIMARY KEY, "name" varchar NOT NULL, "image" varchar NOT NULL, "habitants" integer NOT NULL, "surface" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, "continent_id" integer DEFAULT NULL, "deleted_at" datetime DEFAULT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "tindex_acities_on_deleted_at" ON "acities" ("deleted_at")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "tindex_acities_on_continent_id" ON "acities" ("continent_id")[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "acities" ("id","name","image","habitants","surface","created_at","updated_at","continent_id","deleted_at")
                     SELECT "id","name","image","habitants","surface","created_at","updated_at","continent_id","deleted_at" FROM "cities"[0m
  [1m[35m (5.8ms)[0m  [1m[35mDROP TABLE "cities"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "cities" ("id" integer NOT NULL PRIMARY KEY, "name" varchar NOT NULL, "habitants" integer NOT NULL, "surface" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, "continent_id" integer DEFAULT NULL, "deleted_at" datetime DEFAULT NULL, CONSTRAINT "fk_rails_f1f8c45851"
FOREIGN KEY ("continent_id")
  REFERENCES "continents" ("id")
)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_cities_on_continent_id" ON "cities" ("continent_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_cities_on_deleted_at" ON "cities" ("deleted_at")[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "cities" ("id","name","habitants","surface","created_at","updated_at","continent_id","deleted_at")
                     SELECT "id","name","habitants","surface","created_at","updated_at","continent_id","deleted_at" FROM "acities"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "acities"[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210805015545"]]
  [1m[36mTRANSACTION (4.3ms)[0m  [1m[36mcommit transaction[0m
Migrating to RemoveImageFromContinents (20210805015551)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TEMPORARY TABLE "acontinents" ("id" integer NOT NULL PRIMARY KEY, "name" varchar DEFAULT NULL, "image" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "acontinents" ("id","name","image","created_at","updated_at")
                     SELECT "id","name","image","created_at","updated_at" FROM "continents"[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "continents"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "continents" ("id" integer NOT NULL PRIMARY KEY, "name" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "continents" ("id","name","created_at","updated_at")
                     SELECT "id","name","created_at","updated_at" FROM "acontinents"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "acontinents"[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210805015551"]]
  [1m[36mTRANSACTION (8.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/icons" for ::1 at 2021-08-04 22:56:06 -0300
  [1m[35m (0.7ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by IconsController#create as */*
  Parameters: {"icon"=>{"name"=>"OtherIcon2", "image"=>#<ActionDispatch::Http::UploadedFile:0x00005642becdcc68 @tempfile=#<Tempfile:/tmp/RackMultipart20210804-13864-6pme4d.jpg>, @original_filename="pira.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"icon[image]\"; filename=\"pira.jpg\"\r\nContent-Type: image/jpeg\r\n">, "created"=>"03-06-1501", "height"=>"44", "history"=>"This is Other story....", "cities_ids"=>["2,3"]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
[31mUnpermitted parameter: :cities_ids[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/icons_controller.rb:30:in `create'
  [1m[36mIcon Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "icons" WHERE "icons"."name" = ? AND "icons"."deleted_at" IS NULL LIMIT ?[0m  [["name", "OtherIcon2"], ["LIMIT", 1]]
  ↳ app/controllers/icons_controller.rb:30:in `create'
  [1m[36mIcon Create (0.4ms)[0m  [1m[32mINSERT INTO "icons" ("name", "created", "height", "history", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "OtherIcon2"], ["created", "1501-06-03"], ["height", 44], ["history", "This is Other story...."], ["created_at", "2021-08-05 01:56:07.185345"], ["updated_at", "2021-08-05 01:56:07.185345"]]
  ↳ app/controllers/icons_controller.rb:30:in `create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Icon"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/icons_controller.rb:30:in `create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["key", "vi5647uibkxfbkc8wqxctun79t0u"], ["filename", "pira.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 97929], ["checksum", "jE2c5VkUu8kLpK0WMwQjhQ=="], ["created_at", "2021-08-05 01:56:07.195565"]]
  ↳ app/controllers/icons_controller.rb:30:in `create'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Icon"], ["record_id", 2], ["blob_id", 1], ["created_at", "2021-08-05 01:56:07.200501"]]
  ↳ app/controllers/icons_controller.rb:30:in `create'
  [1m[36mIcon Update (0.2ms)[0m  [1m[33mUPDATE "icons" SET "updated_at" = ? WHERE "icons"."id" = ?[0m  [["updated_at", "2021-08-05 01:56:07.204101"], ["id", 2]]
  ↳ app/controllers/icons_controller.rb:30:in `create'
  [1m[36mTRANSACTION (8.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/icons_controller.rb:30:in `create'
[36m  Disk Storage (1.3ms) [0m[32mUploaded file to key: vi5647uibkxfbkc8wqxctun79t0u (checksum: jE2c5VkUu8kLpK0WMwQjhQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 47a653da-a79b-4aef-892d-46bdf12acd55) to Async(default) with arguments: #<GlobalID:0x00007f0dcc6dfe58 @uri=#<URI::GID gid://sights-challenge/ActiveStorage::Blob/1>>
Completed 500 Internal Server Error in 202ms (ActiveRecord: 19.7ms | Allocations: 45310)


  
NoMethodError (undefined method `split' for nil:NilClass):
  
app/models/icon.rb:18:in `save_cities'
app/controllers/icons_controller.rb:31:in `create'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [47a653da-a79b-4aef-892d-46bdf12acd55] Performing ActiveStorage::AnalyzeJob (Job ID: 47a653da-a79b-4aef-892d-46bdf12acd55) from Async(default) enqueued at 2021-08-05T01:56:07Z with arguments: #<GlobalID:0x00007f0d9804f158 @uri=#<URI::GID gid://sights-challenge/ActiveStorage::Blob/1>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [47a653da-a79b-4aef-892d-46bdf12acd55] [36m  Disk Storage (0.3ms) [0m[34mDownloaded file from key: vi5647uibkxfbkc8wqxctun79t0u[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [47a653da-a79b-4aef-892d-46bdf12acd55]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [47a653da-a79b-4aef-892d-46bdf12acd55]   [1m[36mActiveStorage::Blob Update (0.3ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"width\":850,\"height\":567,\"analyzed\":true}"], ["id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [47a653da-a79b-4aef-892d-46bdf12acd55]   [1m[36mTRANSACTION (13.0ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [47a653da-a79b-4aef-892d-46bdf12acd55] Performed ActiveStorage::AnalyzeJob (Job ID: 47a653da-a79b-4aef-892d-46bdf12acd55) from Async(default) in 237.8ms
Started POST "/icons" for ::1 at 2021-08-04 22:56:53 -0300
Processing by IconsController#create as */*
  Parameters: {"icon"=>{"name"=>"OtherIcon2", "image"=>#<ActionDispatch::Http::UploadedFile:0x00007f0dd446a788 @tempfile=#<Tempfile:/tmp/RackMultipart20210804-13864-ig8gz7.jpg>, @original_filename="pira.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"icon[image]\"; filename=\"pira.jpg\"\r\nContent-Type: image/jpeg\r\n">, "created"=>"03-06-1501", "height"=>"44", "history"=>"This is Other story....", "cities_ids"=>["2,3"]}}
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
[31mUnpermitted parameter: :cities_ids[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/icons_controller.rb:30:in `create'
  [1m[36mIcon Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "icons" WHERE "icons"."name" = ? AND "icons"."deleted_at" IS NULL LIMIT ?[0m  [["name", "OtherIcon2"], ["LIMIT", 1]]
  ↳ app/controllers/icons_controller.rb:30:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/icons_controller.rb:30:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ActiveModel::Errors (1.27ms)
Completed 422 Unprocessable Entity in 66ms (Views: 3.1ms | ActiveRecord: 5.1ms | Allocations: 27553)


Started POST "/icons" for ::1 at 2021-08-04 22:57:01 -0300
Processing by IconsController#create as */*
  Parameters: {"icon"=>{"name"=>"OtherIcon", "image"=>#<ActionDispatch::Http::UploadedFile:0x00007f0dd8054ff0 @tempfile=#<Tempfile:/tmp/RackMultipart20210804-13864-rnity6.jpg>, @original_filename="pira.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"icon[image]\"; filename=\"pira.jpg\"\r\nContent-Type: image/jpeg\r\n">, "created"=>"03-06-1501", "height"=>"44", "history"=>"This is Other story....", "cities_ids"=>["2,3"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
[31mUnpermitted parameter: :cities_ids[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/icons_controller.rb:30:in `create'
  [1m[36mIcon Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "icons" WHERE "icons"."name" = ? AND "icons"."deleted_at" IS NULL LIMIT ?[0m  [["name", "OtherIcon"], ["LIMIT", 1]]
  ↳ app/controllers/icons_controller.rb:30:in `create'
  [1m[36mIcon Create (0.3ms)[0m  [1m[32mINSERT INTO "icons" ("name", "created", "height", "history", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "OtherIcon"], ["created", "1501-06-03"], ["height", 44], ["history", "This is Other story...."], ["created_at", "2021-08-05 01:57:01.958940"], ["updated_at", "2021-08-05 01:57:01.958940"]]
  ↳ app/controllers/icons_controller.rb:30:in `create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Icon"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/icons_controller.rb:30:in `create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["key", "2q6rwa36tpriao500jrnjr25yrhx"], ["filename", "pira.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 97929], ["checksum", "jE2c5VkUu8kLpK0WMwQjhQ=="], ["created_at", "2021-08-05 01:57:01.970384"]]
  ↳ app/controllers/icons_controller.rb:30:in `create'
  [1m[36mActiveStorage::Attachment Create (7.4ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Icon"], ["record_id", 3], ["blob_id", 2], ["created_at", "2021-08-05 01:57:01.973951"]]
  ↳ app/controllers/icons_controller.rb:30:in `create'
  [1m[36mIcon Update (0.2ms)[0m  [1m[33mUPDATE "icons" SET "updated_at" = ? WHERE "icons"."id" = ?[0m  [["updated_at", "2021-08-05 01:57:01.984094"], ["id", 3]]
  ↳ app/controllers/icons_controller.rb:30:in `create'
  [1m[36mTRANSACTION (9.9ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/icons_controller.rb:30:in `create'
[36m  Disk Storage (0.7ms) [0m[32mUploaded file to key: 2q6rwa36tpriao500jrnjr25yrhx (checksum: jE2c5VkUu8kLpK0WMwQjhQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 504191be-a535-49ea-a349-0fd63268f82c) to Async(default) with arguments: #<GlobalID:0x00007f0d9826e588 @uri=#<URI::GID gid://sights-challenge/ActiveStorage::Blob/2>>
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
Completed 500 Internal Server Error in 61ms (ActiveRecord: 18.8ms | Allocations: 13219)


  
NoMethodError (undefined method `split' for nil:NilClass):
  
app/models/icon.rb:18:in `save_cities'
app/controllers/icons_controller.rb:31:in `create'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [504191be-a535-49ea-a349-0fd63268f82c] Performing ActiveStorage::AnalyzeJob (Job ID: 504191be-a535-49ea-a349-0fd63268f82c) from Async(default) enqueued at 2021-08-05T01:57:02Z with arguments: #<GlobalID:0x00005642be0de290 @uri=#<URI::GID gid://sights-challenge/ActiveStorage::Blob/2>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [504191be-a535-49ea-a349-0fd63268f82c] [36m  Disk Storage (0.3ms) [0m[34mDownloaded file from key: 2q6rwa36tpriao500jrnjr25yrhx[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [504191be-a535-49ea-a349-0fd63268f82c]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [504191be-a535-49ea-a349-0fd63268f82c]   [1m[36mActiveStorage::Blob Update (0.4ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"width\":850,\"height\":567,\"analyzed\":true}"], ["id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [504191be-a535-49ea-a349-0fd63268f82c]   [1m[36mTRANSACTION (7.9ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [504191be-a535-49ea-a349-0fd63268f82c] Performed ActiveStorage::AnalyzeJob (Job ID: 504191be-a535-49ea-a349-0fd63268f82c) from Async(default) in 91.19ms
Started POST "/icons" for ::1 at 2021-08-04 22:57:50 -0300
Processing by IconsController#create as */*
  Parameters: {"icon"=>{"name"=>"OtherIcon", "image"=>#<ActionDispatch::Http::UploadedFile:0x00007f0dcc9ed208 @tempfile=#<Tempfile:/tmp/RackMultipart20210804-13864-57lykv.jpg>, @original_filename="pira.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"icon[image]\"; filename=\"pira.jpg\"\r\nContent-Type: image/jpeg\r\n">, "created"=>"03-06-1501", "height"=>"44", "history"=>"This is Other story....", "cities_ids"=>["2,3"]}}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/icons_controller.rb:30:in `create'
  [1m[36mIcon Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "icons" WHERE "icons"."name" = ? AND "icons"."deleted_at" IS NULL LIMIT ?[0m  [["name", "OtherIcon"], ["LIMIT", 1]]
  ↳ app/controllers/icons_controller.rb:30:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/icons_controller.rb:30:in `create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ActiveModel::Errors (1.03ms)
Completed 422 Unprocessable Entity in 71ms (Views: 1.9ms | ActiveRecord: 4.3ms | Allocations: 26985)


Started POST "/icons" for ::1 at 2021-08-04 22:57:55 -0300
Processing by IconsController#create as */*
  Parameters: {"icon"=>{"name"=>"OtherIcon1", "image"=>#<ActionDispatch::Http::UploadedFile:0x00007f0dd43708f0 @tempfile=#<Tempfile:/tmp/RackMultipart20210804-13864-98maj.jpg>, @original_filename="pira.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"icon[image]\"; filename=\"pira.jpg\"\r\nContent-Type: image/jpeg\r\n">, "created"=>"03-06-1501", "height"=>"44", "history"=>"This is Other story....", "cities_ids"=>["2,3"]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/icons_controller.rb:30:in `create'
  [1m[36mIcon Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "icons" WHERE "icons"."name" = ? AND "icons"."deleted_at" IS NULL LIMIT ?[0m  [["name", "OtherIcon1"], ["LIMIT", 1]]
  ↳ app/controllers/icons_controller.rb:30:in `create'
  [1m[36mIcon Create (1.9ms)[0m  [1m[32mINSERT INTO "icons" ("name", "created", "height", "history", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "OtherIcon1"], ["created", "1501-06-03"], ["height", 44], ["history", "This is Other story...."], ["created_at", "2021-08-05 01:57:55.192996"], ["updated_at", "2021-08-05 01:57:55.192996"]]
  ↳ app/controllers/icons_controller.rb:30:in `create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "Icon"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/icons_controller.rb:30:in `create'
  [1m[36mActiveStorage::Blob Create (5.0ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["key", "2vuhwpyo79shiqtnpvydqlu567ib"], ["filename", "pira.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 97929], ["checksum", "jE2c5VkUu8kLpK0WMwQjhQ=="], ["created_at", "2021-08-05 01:57:55.205224"]]
  ↳ app/controllers/icons_controller.rb:30:in `create'
  [1m[36mActiveStorage::Attachment Create (4.0ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "image"], ["record_type", "Icon"], ["record_id", 4], ["blob_id", 3], ["created_at", "2021-08-05 01:57:55.215140"]]
  ↳ app/controllers/icons_controller.rb:30:in `create'
  [1m[36mIcon Update (0.1ms)[0m  [1m[33mUPDATE "icons" SET "updated_at" = ? WHERE "icons"."id" = ?[0m  [["updated_at", "2021-08-05 01:57:55.223179"], ["id", 4]]
  ↳ app/controllers/icons_controller.rb:30:in `create'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/icons_controller.rb:30:in `create'
[36m  Disk Storage (2.0ms) [0m[32mUploaded file to key: 2vuhwpyo79shiqtnpvydqlu567ib (checksum: jE2c5VkUu8kLpK0WMwQjhQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 4b117ca3-f7f8-4ee4-bc99-267092b66692) to Async(default) with arguments: #<GlobalID:0x00007f0dd451a9d0 @uri=#<URI::GID gid://sights-challenge/ActiveStorage::Blob/3>>
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [4b117ca3-f7f8-4ee4-bc99-267092b66692] Performing ActiveStorage::AnalyzeJob (Job ID: 4b117ca3-f7f8-4ee4-bc99-267092b66692) from Async(default) enqueued at 2021-08-05T01:57:55Z with arguments: #<GlobalID:0x00007f0dd4571c80 @uri=#<URI::GID gid://sights-challenge/ActiveStorage::Blob/3>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [4b117ca3-f7f8-4ee4-bc99-267092b66692] [36m  Disk Storage (1.6ms) [0m[34mDownloaded file from key: 2vuhwpyo79shiqtnpvydqlu567ib[0m
[active_model_serializers]   [1m[36mCity Load (0.3ms)[0m  [1m[34mSELECT "cities".* FROM "cities" INNER JOIN "icon_cities" ON "cities"."id" = "icon_cities"."city_id" WHERE "cities"."deleted_at" IS NULL AND "icon_cities"."icon_id" = ?[0m  [["icon_id", 4]]
[active_model_serializers]   ↳ app/controllers/icons_controller.rb:32:in `create'
[active_model_serializers] Rendered IconSerializer with ActiveModelSerializers::Adapter::Attributes (10.25ms)
Completed 201 Created in 120ms (Views: 25.1ms | ActiveRecord: 23.1ms | Allocations: 28678)


[ActiveJob] [ActiveStorage::AnalyzeJob] [4b117ca3-f7f8-4ee4-bc99-267092b66692]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [4b117ca3-f7f8-4ee4-bc99-267092b66692]   [1m[36mActiveStorage::Blob Update (5.2ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"width\":850,\"height\":567,\"analyzed\":true}"], ["id", 3]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [4b117ca3-f7f8-4ee4-bc99-267092b66692]   [1m[36mTRANSACTION (9.6ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [4b117ca3-f7f8-4ee4-bc99-267092b66692] Performed ActiveStorage::AnalyzeJob (Job ID: 4b117ca3-f7f8-4ee4-bc99-267092b66692) from Async(default) in 78.11ms
Started GET "/icons" for ::1 at 2021-08-04 22:58:11 -0300
Processing by IconsController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.3ms)[0m  [1m[34mSELECT "icons".* FROM "icons" WHERE "icons"."deleted_at" IS NULL[0m
  ↳ app/controllers/icons_controller.rb:18:in `index'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Icon"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/models/icon.rb:15:in `image_url'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Icon"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/models/icon.rb:15:in `image_url'
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/models/icon.rb:15:in `image_url'
[active_model_serializers] [36m  Disk Storage (8.5ms) [0m[34mGenerated URL for file at key: vi5647uibkxfbkc8wqxctun79t0u ()[0m
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (23.52ms)
Completed 500 Internal Server Error in 30ms (ActiveRecord: 1.0ms | Allocations: 5752)


  
URI::InvalidURIError (bad URI(is not URI?): nil):
  
app/models/icon.rb:15:in `image_url'
app/controllers/icons_controller.rb:18:in `index'
Started GET "/icons" for ::1 at 2021-08-04 23:03:41 -0300
Processing by IconsController#index as */*
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" WHERE "icons"."deleted_at" IS NULL[0m
  ↳ app/controllers/icons_controller.rb:18:in `index'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Icon"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/models/icon.rb:15:in `image_url'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Icon"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/models/icon.rb:15:in `image_url'
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/models/icon.rb:15:in `image_url'
[active_model_serializers] [36m  Disk Storage (1.2ms) [0m[34mGenerated URL for file at key: vi5647uibkxfbkc8wqxctun79t0u (http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhkbWsxTmpRM2RXbGlhM2htWW10ak9IZHhlR04wZFc0M09YUXdkUVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpTzJsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW5CcGNtRXVhbkJuSWpzZ1ptbHNaVzVoYldVcVBWVlVSaTA0Snlkd2FYSmhMbXB3WndZN0JsUTZFV052Ym5SbGJuUmZkSGx3WlVraUQybHRZV2RsTDJwd1pXY0dPd1pVT2hGelpYSjJhV05sWDI1aGJXVTZDbXh2WTJGcyIsImV4cCI6IjIwMjEtMDgtMDVUMDI6MDg6NDEuMzU3WiIsInB1ciI6ImJsb2Jfa2V5In19--f70f65afc1fd150b8ccdcd2b34fd61fde3171b31/pira.jpg)[0m
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Icon"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/models/icon.rb:15:in `image_url'
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/models/icon.rb:15:in `image_url'
[active_model_serializers] [36m  Disk Storage (0.8ms) [0m[34mGenerated URL for file at key: 2q6rwa36tpriao500jrnjr25yrhx (http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhNbkUyY25kaE16WjBjSEpwWVc4MU1EQnFjbTVxY2pJMWVYSm9lQVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpTzJsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW5CcGNtRXVhbkJuSWpzZ1ptbHNaVzVoYldVcVBWVlVSaTA0Snlkd2FYSmhMbXB3WndZN0JsUTZFV052Ym5SbGJuUmZkSGx3WlVraUQybHRZV2RsTDJwd1pXY0dPd1pVT2hGelpYSjJhV05sWDI1aGJXVTZDbXh2WTJGcyIsImV4cCI6IjIwMjEtMDgtMDVUMDI6MDg6NDEuMzc3WiIsInB1ciI6ImJsb2Jfa2V5In19--df495e9fd97abb43c68afaf7e71077167a254df2/pira.jpg)[0m
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "Icon"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/models/icon.rb:15:in `image_url'
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/models/icon.rb:15:in `image_url'
[active_model_serializers] [36m  Disk Storage (0.9ms) [0m[34mGenerated URL for file at key: 2vuhwpyo79shiqtnpvydqlu567ib (http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhNbloxYUhkd2VXODNPWE5vYVhGMGJuQjJlV1J4YkhVMU5qZHBZZ1k2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpTzJsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW5CcGNtRXVhbkJuSWpzZ1ptbHNaVzVoYldVcVBWVlVSaTA0Snlkd2FYSmhMbXB3WndZN0JsUTZFV052Ym5SbGJuUmZkSGx3WlVraUQybHRZV2RsTDJwd1pXY0dPd1pVT2hGelpYSjJhV05sWDI1aGJXVTZDbXh2WTJGcyIsImV4cCI6IjIwMjEtMDgtMDVUMDI6MDg6NDEuMzg4WiIsInB1ciI6ImJsb2Jfa2V5In19--868cbe52ae8bb432c040924dd607cf36d0e9c44e/pira.jpg)[0m
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (77.24ms)
Completed 200 OK in 121ms (Views: 85.6ms | ActiveRecord: 6.7ms | Allocations: 32630)


Started GET "/icons/2" for ::1 at 2021-08-04 23:03:57 -0300
Processing by IconsController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mIcon Load (0.3ms)[0m  [1m[34mSELECT "icons".* FROM "icons" WHERE "icons"."deleted_at" IS NULL AND "icons"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/icons_controller.rb:56:in `set_icon'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
[active_model_serializers]   [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" INNER JOIN "icon_cities" ON "cities"."id" = "icon_cities"."city_id" WHERE "cities"."deleted_at" IS NULL AND "icon_cities"."icon_id" = ?[0m  [["icon_id", 2]]
[active_model_serializers]   ↳ app/controllers/icons_controller.rb:23:in `show'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Icon"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/controllers/icons_controller.rb:23:in `show'
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/controllers/icons_controller.rb:23:in `show'
[active_model_serializers] Rendered IconSerializer with ActiveModelSerializers::Adapter::Attributes (31.38ms)
Completed 200 OK in 40ms (Views: 30.4ms | ActiveRecord: 2.1ms | Allocations: 10514)


Started GET "/cities?continent=1" for ::1 at 2021-08-04 23:06:27 -0300
Processing by CitiesController#index as */*
  Parameters: {"continent"=>"1"}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 1.1ms | Allocations: 874)


Started POST "/users/login" for ::1 at 2021-08-04 23:06:34 -0300
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
Processing by UsersController#login as */*
  Parameters: {"email"=>"juan@gmail.com", "password"=>"[FILTERED]", "do"=>"users#login", "user"=>{"email"=>"juan@gmail.com"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "juan@gmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:14:in `login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 285ms (Views: 0.5ms | ActiveRecord: 1.8ms | Allocations: 3440)


Started GET "/cities?continent=1" for ::1 at 2021-08-04 23:07:05 -0300
Processing by CitiesController#index as */*
  Parameters: {"continent"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL AND "cities"."continent_id" = ?[0m  [["continent_id", 1]]
  ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "City"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "City"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (13.42ms)
Completed 200 OK in 55ms (Views: 24.5ms | ActiveRecord: 2.3ms | Allocations: 16124)


Started GET "/cities" for ::1 at 2021-08-04 23:07:14 -0300
Processing by CitiesController#index as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "City"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "City"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "City"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (18.71ms)
Completed 200 OK in 25ms (Views: 21.4ms | ActiveRecord: 0.8ms | Allocations: 5327)


Started GET "/cities" for ::1 at 2021-08-04 23:30:34 -0300
Processing by CitiesController#index as */*
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" WHERE "cities"."deleted_at" IS NULL[0m
  ↳ app/controllers/cities_controller.rb:15:in `index'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "City"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/models/city.rb:15:in `image_url'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "City"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/models/city.rb:15:in `image_url'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "City"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/models/city.rb:15:in `image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (11.73ms)
Completed 200 OK in 42ms (Views: 20.4ms | ActiveRecord: 1.5ms | Allocations: 16895)


Started GET "/icons/2" for ::1 at 2021-08-04 23:30:45 -0300
Processing by IconsController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mIcon Load (0.3ms)[0m  [1m[34mSELECT "icons".* FROM "icons" WHERE "icons"."deleted_at" IS NULL AND "icons"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/icons_controller.rb:58:in `set_icon'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
Completed 500 Internal Server Error in 26ms (ActiveRecord: 1.2ms | Allocations: 9760)


  
NameError (uninitialized constant IconsController::IconSerializer
Did you mean?  IconSerializers):
  
app/controllers/icons_controller.rb:25:in `show'
Started GET "/icons/2" for ::1 at 2021-08-04 23:33:14 -0300
Processing by IconsController#show as */*
  Parameters: {"id"=>"2"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/icons_controller.rb:61:in `set_icon'
  [1m[36mIcon Load (0.2ms)[0m  [1m[34mSELECT "icons".* FROM "icons" WHERE "icons"."deleted_at" IS NULL AND "icons"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/icons_controller.rb:61:in `set_icon'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Icon"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/models/icon.rb:15:in `image_url'
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/models/icon.rb:15:in `image_url'
[active_model_serializers] [36m  Disk Storage (0.7ms) [0m[34mGenerated URL for file at key: vi5647uibkxfbkc8wqxctun79t0u (http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhkbWsxTmpRM2RXbGlhM2htWW10ak9IZHhlR04wZFc0M09YUXdkUVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpTzJsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW5CcGNtRXVhbkJuSWpzZ1ptbHNaVzVoYldVcVBWVlVSaTA0Snlkd2FYSmhMbXB3WndZN0JsUTZFV052Ym5SbGJuUmZkSGx3WlVraUQybHRZV2RsTDJwd1pXY0dPd1pVT2hGelpYSjJhV05sWDI1aGJXVTZDbXh2WTJGcyIsImV4cCI6IjIwMjEtMDgtMDVUMDI6Mzg6MTQuNTA0WiIsInB1ciI6ImJsb2Jfa2V5In19--c5db4266c7cf3c2f54b1bec203549253a2bf9ff7/pira.jpg)[0m
[active_model_serializers]   [1m[36mCity Load (0.2ms)[0m  [1m[34mSELECT "cities".* FROM "cities" INNER JOIN "icon_cities" ON "cities"."id" = "icon_cities"."city_id" WHERE "cities"."deleted_at" IS NULL AND "icon_cities"."icon_id" = ?[0m  [["icon_id", 2]]
[active_model_serializers]   ↳ app/controllers/icons_controller.rb:25:in `show'
[active_model_serializers] Rendered IconSerializers::DetailSerializer with ActiveModelSerializers::Adapter::Attributes (138.77ms)
Completed 200 OK in 171ms (Views: 127.8ms | ActiveRecord: 14.3ms | Allocations: 34288)


Started GET "/icons" for ::1 at 2021-08-04 23:33:19 -0300
Processing by IconsController#index as */*
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:12:in `authorize_request'
  [1m[36mIcon Load (0.3ms)[0m  [1m[34mSELECT "icons".* FROM "icons" WHERE "icons"."deleted_at" IS NULL[0m
  ↳ app/controllers/icons_controller.rb:17:in `index'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "Icon"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/models/icon.rb:15:in `image_url'
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "Icon"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/models/icon.rb:15:in `image_url'
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/models/icon.rb:15:in `image_url'
[active_model_serializers] [36m  Disk Storage (0.8ms) [0m[34mGenerated URL for file at key: vi5647uibkxfbkc8wqxctun79t0u (http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhkbWsxTmpRM2RXbGlhM2htWW10ak9IZHhlR04wZFc0M09YUXdkUVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpTzJsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW5CcGNtRXVhbkJuSWpzZ1ptbHNaVzVoYldVcVBWVlVSaTA0Snlkd2FYSmhMbXB3WndZN0JsUTZFV052Ym5SbGJuUmZkSGx3WlVraUQybHRZV2RsTDJwd1pXY0dPd1pVT2hGelpYSjJhV05sWDI1aGJXVTZDbXh2WTJGcyIsImV4cCI6IjIwMjEtMDgtMDVUMDI6Mzg6MTkuNDI1WiIsInB1ciI6ImJsb2Jfa2V5In19--7467d1b7fc1147d813bb28598ae1d869c4d641dd/pira.jpg)[0m
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "Icon"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/models/icon.rb:15:in `image_url'
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/models/icon.rb:15:in `image_url'
[active_model_serializers] [36m  Disk Storage (0.7ms) [0m[34mGenerated URL for file at key: 2q6rwa36tpriao500jrnjr25yrhx (http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhNbkUyY25kaE16WjBjSEpwWVc4MU1EQnFjbTVxY2pJMWVYSm9lQVk2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpTzJsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW5CcGNtRXVhbkJuSWpzZ1ptbHNaVzVoYldVcVBWVlVSaTA0Snlkd2FYSmhMbXB3WndZN0JsUTZFV052Ym5SbGJuUmZkSGx3WlVraUQybHRZV2RsTDJwd1pXY0dPd1pVT2hGelpYSjJhV05sWDI1aGJXVTZDbXh2WTJGcyIsImV4cCI6IjIwMjEtMDgtMDVUMDI6Mzg6MTkuNDM0WiIsInB1ciI6ImJsb2Jfa2V5In19--2fcce73b0a9c6492082f30a93bd0c91c4f327ac5/pira.jpg)[0m
[active_model_serializers]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "Icon"], ["name", "image"], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/models/icon.rb:15:in `image_url'
[active_model_serializers]   [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers]   ↳ app/models/icon.rb:15:in `image_url'
[active_model_serializers] [36m  Disk Storage (0.6ms) [0m[34mGenerated URL for file at key: 2vuhwpyo79shiqtnpvydqlu567ib (http://localhost:3000/rails/active_storage/disk/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaDdDVG9JYTJWNVNTSWhNbloxYUhkd2VXODNPWE5vYVhGMGJuQjJlV1J4YkhVMU5qZHBZZ1k2QmtWVU9oQmthWE53YjNOcGRHbHZia2tpTzJsdWJHbHVaVHNnWm1sc1pXNWhiV1U5SW5CcGNtRXVhbkJuSWpzZ1ptbHNaVzVoYldVcVBWVlVSaTA0Snlkd2FYSmhMbXB3WndZN0JsUTZFV052Ym5SbGJuUmZkSGx3WlVraUQybHRZV2RsTDJwd1pXY0dPd1pVT2hGelpYSjJhV05sWDI1aGJXVTZDbXh2WTJGcyIsImV4cCI6IjIwMjEtMDgtMDVUMDI6Mzg6MTkuNDQwWiIsInB1ciI6ImJsb2Jfa2V5In19--70c6cb6deec028c4ee566d6647f711b8016a6973/pira.jpg)[0m
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (29.77ms)
Completed 200 OK in 44ms (Views: 32.7ms | ActiveRecord: 1.7ms | Allocations: 8630)


